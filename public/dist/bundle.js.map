{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/actions/user.js","webpack:///./src/components/LoginComponent.js","webpack:///./src/components/SignUpComponent.js","webpack:///./src/components/Home.js","webpack:///./src/actions/message.js","webpack:///./src/components/AvatarComponent.js","webpack:///./src/utils/filterByDateAndText.js","webpack:///./src/components/RoomComponent.js","webpack:///./src/actions/filter.js","webpack:///./src/components/ContactComponent.js","webpack:///./src/selector/filterContacts.js","webpack:///./src/actions/notification.js","webpack:///./src/components/ContactsComponent.js","webpack:///./src/components/HeaderComponent.js","webpack:///./src/components/SearchBarComponent.js","webpack:///./src/components/NotificationsComponet.js","webpack:///./src/components/Kuro.js","webpack:///./src/router/privateroute.js","webpack:///./src/router/publicroute.js","webpack:///./src/components/SearchContactComponent.js","webpack:///./src/components/DetailsComponent.js","webpack:///./src/components/SettingsComponent.js","webpack:///./src/utils/fileExtensionExtractor.js","webpack:///./src/components/ContactDetailsComponent.js","webpack:///./src/router/approute.js","webpack:///./src/reducers/user.js","webpack:///./src/reducers/filter.js","webpack:///./src/store/store.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","BASEURL","process","generateAxiosInstance","token","axiosInstance","axios","baseURL","headers","addUser","user","type","editUser","updates","editUserContacts","contacts","startHasAvatar","startAddContact","contactId","dispatch","post","then","connect","state","Authenticated","_id","startLogInUser","email","password","props","useState","undefined","error","setError","onSubmit","preventDefault","$form","document","querySelector","querySelectorAll","history","console","log","className","required","placeholder","startSignUpUser","username","repeatPassword","response","keyPattern","minLength","showBack","setshowBack","onClick","instance","hasAvatar","setHasAvatar","fetchAvatar","userId","useEffect","displaySmall","forEach","initials","classList","add","src","style","toUpperCase","substring","messages","sort","a","b","moment","createdAt","valueOf","contact","find","filter","startFetchMessages","startPostMessage","message","startPostAttachment","messageId","attachment","formData","FormData","append","startFetchAttachment","startRemoveMessages","setMessages","newMessage","setNewMessage","fetchContents","io","on","onhandleSend","messageText","getElementById","files","receivers","seen","emit","setAttachmentTitleOnSpan","handleDeleteMessage","newMessages","title","innerText","filterByDate","sender","disabled","accept","onChange","target","setCurrentContactId","contactPositionId","contactExists","startFetchMessageAlert","changeStyleOnMessageAlert","fontWeight","fetchMessageAlert","senderId","onSearch","onhandleBack","onhandleRemove","alert","onhandleSendRequest","requestType","receiverId","text","toLowerCase","includes","Placeholder","filterContactsByText","startDeleteContact","startPostNotification","notification","confirm","AvatarComponent","ButtonComponent","onSettings","onhandleLogoutAll","onhandleRemoveAccount","onhandleLogout","search","setfilterText","replace","startFetchNotifications","notificationId","startRemoveNotification","notifications","setNotifications","fetchNotifications","onhandleAddContact","newNotificaitons","handleRemoveNotification","newNotifications","request","redDot","opacity","messageAlertCheckBox","addEventListener","checked","socketIoClient","Header","generateHeader","Avatar","currentRoomContactId","startLogoutUser","startFetchContacts","RefetchContacts","store","location","href","Component","component","rest","to","searchText","match","params","findContact","startFindContacts","setContacts","fetchContacts","Details","me","age","phone","sex","editable","handleName","setState","handlePassword","handleAge","handlePhone","handleSex","showPassword","changePassword","onSave","handleEdit","handleSave","this","maxLength","selected","React","startEditUser","patches","patch","startLogoutAllUser","startDeleteUser","startAddAvatar","avatar","showSaveAvatarButton","setShowSaveAvatarButton","onSaveAvatar","newAvatar","split","reverse","URL","createObjectURL","display","hiddenImageTag","click","idValue","startFetchContactDetails","contactDetails","setContactDetails","setMount","fetchcontactDetails","createHistory","Home","path","exact","Kuro","fallback","SearchContact","Settings","ContactDetails","defaultUser","defaultFilter","action","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","userpersistConfig","storage","userpersistReducer","persistReducer","PURGE","createStore","combineReducers","filterReducer","applyMiddleware","thunk","persistor","persistStore","JSX","loading","ReactDom","render"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,EAAG,GAGAZ,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAInB,EAGxBY,EAAoBQ,EAAIN,EAGxBF,EAAoBS,EAAI,SAASL,EAASM,EAAMC,GAC3CX,EAAoBY,EAAER,EAASM,IAClC5B,OAAO+B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEX,EAAoBgB,EAAI,SAASZ,GACX,oBAAXa,QAA0BA,OAAOC,aAC1CpC,OAAO+B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DrC,OAAO+B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKzC,OAAO0C,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBzC,OAAO+B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBS,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoBS,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRX,EAAoBY,EAAI,SAASgB,EAAQC,GAAY,OAAO/C,OAAOC,UAAUC,eAAeC,KAAK2C,EAAQC,IAGzG7B,EAAoB8B,EAAI,GAExB,IAAIC,EAAaC,OAAqB,aAAIA,OAAqB,cAAK,GAChEC,EAAmBF,EAAW5C,KAAKuC,KAAKK,GAC5CA,EAAW5C,KAAOf,EAClB2D,EAAaA,EAAWG,QACxB,IAAI,IAAIvD,EAAI,EAAGA,EAAIoD,EAAWlD,OAAQF,IAAKP,EAAqB2D,EAAWpD,IAC3E,IAAIU,EAAsB4C,EAI1B1C,EAAgBJ,KAAK,CAAC,IAAI,IAEnBM,I,mECvJT,IAAI0C,EAAM,CACT,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,WAAY,IACZ,cAAe,IACf,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,aAAc,IACd,gBAAiB,IACjB,WAAY,IACZ,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,KAIf,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOrC,EAAoBsC,GAE5B,SAASC,EAAsBF,GAC9B,IAAIrC,EAAoBY,EAAEuB,EAAKE,GAAM,CACpC,IAAIG,EAAI,IAAIC,MAAM,uBAAyBJ,EAAM,KAEjD,MADAG,EAAEE,KAAO,mBACHF,EAEP,OAAOL,EAAIE,GAEZD,EAAeO,KAAO,WACrB,OAAO7D,OAAO6D,KAAKR,IAEpBC,EAAeQ,QAAUL,EACzBlC,EAAOD,QAAUgC,EACjBA,EAAeE,GAAK,K,m7BC9Rb,IAAMO,EAAUC,yCAEjBC,EAAwB,WAAgB,IAAfC,EAAe,uDAAP,GAC7BC,EAAgBC,IAAM1B,OAAO,CAC/B2B,QAASN,EACTO,QAAS,CAEL,+BAA2BJ,MAGnC,OAAOC,GAGEI,EAAU,eAACC,EAAD,uDAAQ,GAAIN,EAAZ,6CAAuB,CAC1CO,KAAM,WACND,OACAN,UAaSQ,EAAW,SAACC,GAAD,MAAc,CAClCF,KAAM,YACNE,YAGSC,EAAmB,SAACC,GAAD,MAAe,CAC3CJ,KAAM,qBACNI,aA6DSC,EAAiB,SAACtB,GAC3B,OAAO,WACH,OAAOS,IAAwBhC,IAAxB,iBAAsCuB,EAAtC,iBAwBFuB,EAAkB,SAACb,EAAOc,GACnC,OAAO,SAACC,GACJ,OAAOhB,EAAsBC,GAAOgB,KAA7B,eAAkD,CAACF,cAAYG,MAAK,SAACvE,GACxEqE,EAASL,EAAiBhE,EAAOrB,Y,gkCC3H7C,IAyCe6F,eAJS,SAACC,GAAD,MAAY,CAChCC,gBAAiBD,EAAMb,KAAKe,QALL,SAACN,GAAD,MAAe,CACtCO,eAAgB,SAACC,EAAOC,GAAR,OAAqBT,EDgBX,SAACQ,EAAOC,GAClC,OAAO,SAACT,GACJ,OAAOhB,IAAwBiB,KAAK,eAAgB,CAACO,QAAOC,aAAWP,MAAK,SAACvE,GACzEqE,EAASV,EAAQ3D,EAAOrB,KAAKiF,KAAM5D,EAAOrB,KAAK2E,YCnBTsB,CAAeC,EAAOC,QAOzDN,EAzCD,SAACO,GAAU,QAEKC,wBAASC,GAFd,GAEdC,EAFc,KAEPC,EAFO,KAIfC,EAAQ,e,EAAA,G,EAAA,yBAAG,WAAOtC,GAAP,iGACbA,EAAEuC,iBACIC,EAAQC,SAASC,cAAc,QAC/BX,EAAQS,EAAMG,iBAAiB,SAAS,GAAGhE,MAC3CqD,EAAWQ,EAAMG,iBAAiB,SAAS,GAAGhE,MAJvC,kBAMFsD,EAAMH,eAAeC,EAAOC,GAN1B,OAOLC,EAAML,gBACLS,OAASF,GACTF,EAAMW,QAAQjG,KAAK,QATf,kDAYT0F,EAAS,6DACTQ,QAAQC,IAAR,MAbS,yD,+KAAH,sDAiBd,OACA,yBAAKC,UAAU,SACNX,GAAS,0BAAMW,UAAU,SAASX,GACnC,0BAAMW,UAAU,cAAcT,SAAUA,GACpC,2BAAOvB,KAAK,OAAOiC,UAAQ,EAACC,YAAY,QAAQF,UAAU,6BAC1D,2BAAOhC,KAAK,WAAWiC,UAAQ,EAACC,YAAY,WAAWF,UAAU,6BACjE,4BAAQA,UAAU,iBAAlB,e,gkCC3BhB,IAgDerB,mBAAQS,GAJI,SAACZ,GAAD,MAAe,CACtC2B,gBAAiB,SAACpC,GAAD,OAAUS,EFJA,SAACT,GAC5B,OAAO,SAACS,GACJ,OAAOhB,IAAwBiB,KAAK,SAA7B,KAA2CV,IAAOW,MAAK,SAACvE,GAE3D,OADAqE,EAASV,EAAQ3D,EAAOrB,KAAKiF,KAAM5D,EAAOrB,KAAK2E,QACxCtD,EAAOrB,KAAK2E,UEAS0C,CAAgBpC,QAGzCY,EAhDA,SAACO,GAAU,QAEIC,wBAASC,GAFb,GAEfC,EAFe,KAERC,EAFQ,KAIhBC,EAAQ,e,EAAA,G,EAAA,yBAAG,WAAOtC,GAAP,mGACbA,EAAEuC,iBACIC,EAAQC,SAASC,cAAc,qBAC/BX,EAAQS,EAAMG,iBAAiB,SAAS,GAAGhE,MAC3CwE,EAAWX,EAAMG,iBAAiB,SAAS,GAAGhE,MAC9CqD,EAAWQ,EAAMG,iBAAiB,SAAS,GAAGhE,MAC9CyE,EAAiBZ,EAAMG,iBAAiB,SAAS,GAAGhE,MACpDmC,EAAO,CAACiB,QAAOoB,WAAUnB,YAC5BA,IAAaoB,EARH,yCASFf,EAAS,4BATP,YAWVL,EAAS3F,OAAS,GAXR,0CAYFgG,EAAS,4CAZP,mCAeHJ,EAAMiB,gBAAgBpC,GAfnB,QAgBTuB,OAASF,GACTF,EAAMW,QAAQjG,KAAK,gBAjBV,mDAmBN,KAAE0G,SAASxH,MAAiC,OAAzB,KAAEwH,SAASxH,KAAKqE,MAClCmC,EAAS,GAAD,OAAI/F,OAAO6D,KAAK,KAAEkD,SAASxH,KAAKyH,YAAhC,aAEZT,QAAQC,IAAI,KAAEO,UAtBL,0D,+KAAH,sDA0Bd,OACI,yBAAKN,UAAU,UACX,0BAAMA,UAAU,SAASX,GACzB,0BAAME,SAAUA,EAAUS,UAAU,gBAChC,2BAAOhC,KAAK,OAAOiC,UAAQ,EAACD,UAAU,2BAA2BE,YAAY,UAC7E,2BAAOlC,KAAK,OAAOiC,UAAQ,EAACD,UAAU,2BAA2BE,YAAY,aAC7E,2BAAOM,UAAU,IAAIxC,KAAK,WAAWiC,UAAQ,EAACD,UAAU,2BAA2BE,YAAY,aAC/F,2BAAOM,UAAU,IAAIxC,KAAK,WAAWiC,UAAQ,EAACD,UAAU,2BAA2BE,YAAY,oBAC/F,4BAAQF,UAAU,kBAAlB,gB,u8BCtCD,eAACd,GAAU,QAEUC,wBAASC,GAFnB,GAEfqB,EAFe,KAELC,EAFK,KAItB,OACI,yBAAKV,UAAU,QACX,yBAAKA,UAAU,mBAGFS,EACG,4BAAQE,QAAS,kBAAMD,GAAY,IAAQV,UAAU,eACjD,yBAAKA,UAAU,qBAAf,MAIJ,qCAEJ,yBAAKA,UAAU,wBACX,0BAAMA,UAAU,aAAhB,MAEPS,EACG,kBAAC,EAAD,CAAQZ,QAASX,EAAMW,UAEvB,yBAAKG,UAAU,eACX,kBAAC,EAAD,CAAOH,QAASX,EAAMW,UACtB,+DAEA,4BAAQc,QAAU,kBAAMD,GAAY,IAAOV,UAAU,4BAArD,cC5BtBxC,EAAwB,WAAgB,IAAfC,EAAe,uDAAP,GAC7BmD,EAAWjD,IAAM1B,OAAO,CAC1B2B,QAJQL,yCAKRM,QAAS,CAEL,+BAA2BJ,MAGnC,OAAOmD,G,gkCCNJ,IAiDQjC,mBAAQS,GAJI,SAACZ,GAAD,MAAe,CACtCH,eAAgB,SAACtB,GAAD,OAAQyB,EAASH,EAAetB,QAGrC4B,EAjDgB,SAACO,GAAU,QAEJC,wBAASC,GAFL,GAE/ByB,EAF+B,KAEpBC,EAFoB,KAIhCC,EAAW,e,EAAA,G,EAAA,yBAAG,sHAEN7B,EAAMb,eAAea,EAAMX,WAAaW,EAAM8B,QAAQtC,MAAK,SAACvE,GAC9D2G,EAAa3G,EAAOrB,SAHZ,sDAMZgI,GAAa,GACbhB,QAAQC,IAAR,MAPY,uD,+KAAH,qDAqBjB,OAVAkB,qBAAU,YACNF,IACG7B,EAAMgC,eAC2BxB,SAASE,iBAAiB,kBAClCuB,SAAQ,SAACC,GAC7BA,EAASC,UAAUC,IAAI,gDAGhC,IAGEpC,EAAM8B,OACMH,EACG,yBAAKb,UAAU,uBAAuBuB,IAAG,UAAKjE,EAAL,iBAAqB4B,EAAM8B,OAA3B,aAEzC,6BACI,yBAAKQ,MAAO,CAAC,QAAY,QAASxB,UAAU,uBAAuBuB,IAAK,KACxE,0BAAMvB,UAAU,2BAA2Bd,EAAMkB,SAASqB,cAAcC,UAAU,EAAG,KAIxFb,EACG,yBAAKb,UAAU,gCACfjD,GAAG,gBACHwE,IAAG,UAAKjE,EAAL,iBAAqB4B,EAAMX,UAA3B,aAEK,0BAAMxB,GAAG,gBAAgBiD,UAAU,2BAA2Bd,EAAMkB,SAASqB,cAAcC,UAAU,EAAG,O,gBC5C7H,WAACC,GACZ,OAAOA,EAASC,MAAK,SAACC,EAAGC,GACrB,OAAOC,IAAOF,EAAEG,WAAWC,UAAYF,IAAOD,EAAEE,WAAWC,UAAY,GAAI,M,ilDCWnF,IA+LetD,eATS,SAACC,GAErB,MAAO,CACHsD,QAFYtD,EAAMb,KAAKK,SAAS+D,MAAK,SAACD,GAAD,OAAaA,EAAQnF,KAAO6B,EAAMwD,OAAOrF,MAG9EqD,SAAUxB,EAAMb,KAAKqC,SACrBtB,IAAKF,EAAMb,KAAKe,QAdG,SAACN,GAAD,MAAe,CACtC6D,mBAAoB,SAAC5E,EAAOc,GAAR,OAAsBC,EH/KZ,SAACf,EAAOc,GACtC,OAAO,WACH,OAAOf,EAAsBC,GAAOjC,IAA7B,oBAA8C+C,KG6KN8D,CAAmB5E,EAAOc,KAC7E+D,iBAAkB,SAAC7E,EAAO8E,GAAR,OAAoB/D,EHpKV,SAACf,EAAO8E,GACpC,OAAO,WACH,OAAO/E,EAAsBC,GAAOgB,KAAK,YAAa8D,IGkKXD,CAAiB7E,EAAO8E,KACvEC,oBAAqB,SAAC/E,EAAOgF,EAAWC,GAAnB,OAAkClE,EH/JxB,SAACf,EAAOgF,EAAWC,GAClD,OAAO,WACH,IAAMC,EAAW,IAAIC,SAErB,OADAD,EAASE,OAAO,oBAAqBH,GAC9BlF,EAAsBC,GAC5BgB,KADM,oBACYgE,EADZ,eACoCE,EAAU,CAAC9E,QAAS,CAAC,eAAgB,0BG0JpB2E,CAAoB/E,EAAOgF,EAAWC,KACtGI,qBAAsB,SAACrF,EAAOc,EAAWkE,GAAnB,OAAiCjE,EHvJvB,SAACf,EAAOc,EAAWkE,GACnD,OAAO,WACH,OAAOjF,EAAsBC,GAAOjC,IAA7B,oBAA8C+C,EAA9C,YAA2DkE,EAA3D,iBGqJqDK,CAAqBrF,EAAOc,EAAWkE,KACvGpE,eAAgB,SAACtB,GAAD,OAAQyB,EAASH,EAAetB,KAChDgG,oBAAqB,SAACtF,EAAOgF,GAAR,OAAsBjE,EH9KZ,SAACf,EAAOgF,GACvC,OAAO,WACH,OAAOjF,EAAsBC,GAAtB,2BAAiDgF,KG4KRM,CAAoBtF,EAAOgF,QAYpE9D,EA/LF,SAACO,GAAU,QAEYC,mBAAS,IAFrB,GAEbwC,EAFa,KAEHqB,EAFG,SAGgB7D,mBAAS,IAHzB,GAGb8D,EAHa,KAGDC,EAHC,SAIM/D,wBAASC,GAJf,GAIbC,EAJa,KAINC,EAJM,KAMd6D,EAAa,4CAAG,sHAERjE,EAAMmD,mBAAmBnD,EAAMzB,MAAOyB,EAAMgD,QAAQnF,IAAI2B,MAAK,SAACvE,GAChE6I,EAAY7I,EAAOrB,SAHT,OAKdwG,OAASF,GALK,+CAOdE,EAAS,sDAPK,wDAAH,qDAenB2B,qBAAU,WACN+B,EAAY,GAAD,SAAKrB,GAAL,CAAesB,OAC3B,CAACA,IAEJhC,qBAAU,WACNkC,IAEAC,GAAGC,GAAG,WAAW,SAACd,GACdW,EAAcX,QAEnB,IAEH,IAAMe,EAAY,4CAAG,0GACXC,EAAc7D,SAAS8D,eAAe,8BAA8B5H,MACpE8G,EAAahD,SAAS8D,eAAe,2BAA2BC,MAAM,GACtElB,EAAU,CAAEA,QAASgB,EAAaG,UAAW,CAACxE,EAAMgD,QAAQnF,IAAK4G,MAAM,GAH5D,SAKRJ,GAAgBb,EALR,uBAMTpD,OAASF,GANA,0CASPF,EAAMoD,iBAAiBpD,EAAMzB,MAAO8E,GACrC7D,KADC,4CACI,WAAOvE,GAAP,oFACEuI,EADF,gCAEQxD,EAAMsD,oBAAoBtD,EAAMzB,MAAOtD,EAAOrB,KAAKgG,IAAK4D,GACzDhE,MAAK,SAACvE,GACHiJ,GAAGQ,KAAK,cAAezJ,EAAOrB,MAAM,SAACuG,GACjC,GAAIA,EACA,OAAOS,QAAQC,IAAIV,MAG3B2D,EAAY,GAAD,SAAKrB,GAAL,CAAexH,EAAOrB,WAT3C,OAYFsK,GAAGQ,KAAK,cAAezJ,EAAOrB,MAAM,SAACuG,GACjC,GAAIA,EACA,OAAOS,QAAQC,IAAIV,MAG3B2D,EAAY,GAAD,SAAKrB,GAAL,CAAexH,EAAOrB,QAjB/B,2CADJ,uDATO,OA6BbwG,OAASF,GACTM,SAAS8D,eAAe,8BAA8B5H,MAAQ,GAC9DiI,EAAyB,IA/BZ,kDAiCbvE,EAAS,qCACTQ,QAAQC,IAAR,MAlCa,0DAAH,qDAuCZ+D,EAAmB,4CAAG,WAAOrB,GAAP,yGAEdvD,EAAM6D,oBAAoB7D,EAAMzB,MAAOgF,GAAW/D,MAAK,SAACvE,GAC1D,IAAM4J,EAAcpC,EAAS/E,KAAI,SAAC2F,GAI9B,OAHIA,EAAQzD,MAAQ3E,EAAOrB,KAAKgG,MAC5ByD,EAAQA,QAAUpI,EAAOrB,KAAKyJ,SAE3BA,KAEXS,EAAYe,MATI,sDAYpBjE,QAAQC,IAAR,MAZoB,wDAAH,sDAgBnB8D,EAA2B,SAACG,GACNtE,SAASC,cAAc,6BAC/BsE,UAAYD,GAOhC,OACI,yBAAKhE,UAAU,QACX,yBAAKA,UAAU,mBACX,kBAAC,EAAD,CACII,SAAUlB,EAAMgD,QAAQ9B,SACxBc,cAAc,EACdL,UAAW3B,EAAMgD,QAAQrB,UACzBtC,UAAWW,EAAMgD,QAAQnF,KAC7B,0BAAMiD,UAAU,4BAA4Bd,EAAMgD,QAAQ9B,UAC1D,yBAAKJ,UAAU,iBACVkE,EAAavC,GAAU/E,KAAI,SAAC2F,GACzB,OAAIA,EAAQ4B,SAAWjF,EAAMJ,IAErB,yBAAK5C,IAAKqG,EAAQzD,IAAKkB,UAAU,4CAM7B,0BAAMA,UAAU,oBAAoBuC,EAAQA,SAC5C,yBAAKvC,UAAU,oBACX,2BAAOhC,KAAK,WAAWjB,GAAG,2CAC1B,0BAAMiD,UAAU,0BAAhB,OACA,4BAAQoE,SAAW7B,EAAQ4B,SAAWjF,EAAMJ,IACxCkB,UAAU,sCACVW,QAAS,kBAAMmD,EAAoBvB,EAAQzD,OAF/C,YAUZ,yBAAK5C,IAAKqG,EAAQzD,IAAKkB,UAAU,uBAK7B,0BAAMA,UAAU,oBAAoBuC,EAAQA,SAC5C,yBAAKvC,UAAU,oBACX,2BAAOhC,KAAK,WAAWjB,GAAG,2CAC1B,0BAAMiD,UAAU,0BAAhB,OACA,4BAAQoE,SAAW7B,EAAQ4B,SAAWjF,EAAMJ,IACxCkB,UAAU,sCACVW,QAAS,kBAAMmD,EAAoBvB,EAAQzD,OAF/C,gBAUpB,yBAAKkB,UAAU,uBACP,0BAAMA,UAAU,SAASX,GACzB,0BAAMW,UAAU,6BAChB,yBAAKA,UAAU,gCACX,2BAAOhC,KAAK,OAAOjB,GAAG,+BACtB,yBAAKiD,UAAU,iCACX,2BACAhC,KAAK,OACLqG,OAAO,wHACPzI,WAAOwD,EACPkF,SAlED,SAACrH,GACxB4G,EAAyB5G,EAAEsH,OAAOd,MAAM,GAAGtI,OAkEnB4B,GAAG,4BACH,yBACIiD,UAAU,kBACVuB,IAAI,4BAEZ,4BAAQZ,QAAS2C,EAActD,UAAU,sBAAzC,eC/KfwE,EAAsB,SAACzH,GAAD,MAAS,CACxCiB,KAAM,4BACNjB,O,yHCCG,IA4GQ4B,eAzBS,SAACC,EAAOM,GAM5B,IAAMuF,EAAoB7F,EAAMb,KAAKK,SAASxB,KAAI,SAACsF,GAC/C,GAAGA,EAAQnF,KAAOmC,EAAMgD,QAAQnF,GAC5B,OAAOmF,EAAQpD,OAGpBsD,QAAO,SAACtD,GAAD,YAAiBM,IAARN,KAEnB,MAAO,CACHrB,MAAOmB,EAAMb,KAAKN,MAClBgH,oBACAC,gBAAgBD,EAAkBnL,QAAU,OAIzB,SAACkF,GAAD,MAAe,CACtCgG,oBAAqB,SAACzH,GAAD,OAAQyB,EAASgG,EAAoBzH,KAC1D4H,uBAAwB,SAAClH,EAAOc,GAAR,OAAsBC,ELlEZ,SAACf,EAAOc,GAC1C,OAAO,WACH,OAAOf,EAAsBC,GAAOjC,IAA7B,oBAA8C+C,EAA9C,mBKgE4CoG,CAAuBlH,EAAOc,QAG1EI,EA5GQ,SAACO,GAEpB,IAWM0F,EAA4B,WACTlF,SAAS8D,eAAT,UAA2BtE,EAAMgD,QAAQnF,KACjDyE,MAAMqD,WAAa,OAG9BC,EAAiB,e,EAAA,G,EAAA,yBAAG,sHAEZ5F,EAAMyF,uBAAuBzF,EAAMzB,MAAOyB,EAAMgD,QAAQnF,IAAI2B,MAAK,SAACvE,GAChEA,EAAOrB,MACP8L,OAJU,sDAQlB9E,QAAQC,IAAR,MARkB,uD,+KAAH,qDAqBvB,OATAkB,qBAAU,WACN6D,IACA1B,GAAGC,GAAG,gBAAgB,SAACc,GAChBA,EAAOY,WAAa7F,EAAMgD,QAAQnF,IACjC6H,SAGT,IAGK,yBAAK5E,UAAU,WACX,4BAAQoE,SAAUlF,EAAM8F,SAAUhF,UAAU,6BAA6BW,QAvCnE,WACdzB,EAAMsF,oBAAoBtF,EAAMgD,QAAQnF,IACxCmC,EAAM+F,iBA2CU,kBAAC,EAAD,CACA7E,SAAUlB,EAAMgD,QAAQ9B,SACxB7B,UAAWW,EAAMgD,QAAQnF,GACzBmE,cAAc,EACdL,UAAW3B,EAAMgD,QAAQrB,aAEzB,0BAAM9D,GAAImC,EAAMgD,QAAQnF,GAAIiD,UAAU,qBAAqBd,EAAMgD,QAAQ9B,UAC7E,yBAAKJ,UAAU,oBACX,2BAAOjD,GAAG,6BAA6BiB,KAAK,aAC5C,yBAAKgC,UAAU,0BACX,mCACA,mCACA,oCAEJ,yBAAKA,UAAU,wCACX,4BAAQA,UAAU,2BAClBoE,UAAWlF,EAAMuF,kBAAkB,GACnC9D,QAAS,kBAAMzB,EAAMW,QAAQjG,KAAd,gCAA6CsF,EAAMgD,QAAQpD,KAAOI,EAAMuF,sBAFvF,WAICvF,EAAMwF,cAEH,4BAAQ1E,UAAU,2BAClBW,QAAS,kBAAMzB,EAAMgG,eAAehG,EAAMgD,QAAQnF,MADlD,UAKA,4BAAQiD,UAAU,2BAClBW,QAnEF,SAAC1D,GACvBkI,MAAM,iBACNjG,EAAMkG,oBAAoB,CAACC,YAAa,kBAAmBC,WAAYpG,EAAMgD,QAAQnF,KACrFE,EAAEsH,OAAOH,UAAW,IA+DI,a,kBCjFjB,YAAChG,GAAsB,IAAZmH,EAAY,uDAAP,GAC3B,OAAOnH,EAASgE,QAAO,SAACF,GAAD,OAAaA,EAAQ9B,SAASoF,cAAcC,SAASF,EAAKC,mBCE/EhI,GAAwB,WAAgB,IAAfC,EAAe,uDAAP,GAC7BmD,EAAWjD,IAAM1B,OAAO,CAC1B2B,QAJQL,yCAKRM,QAAS,CAEL,+BAA2BJ,MAGnC,OAAOmD,G,gUCDX,IAAM8E,GAAc,kBAChB,yBAAK1F,UAAU,wBACX,yBAAKA,UAAU,4CACf,yBAAKA,UAAU,wBA+DRrB,gBAdS,SAACC,EAAOM,GAC5B,IAAGA,EAAM8F,SAGT,MAAO,CACH5G,SAAUuH,GAAqB/G,EAAMb,KAAKK,SAAUQ,EAAMwD,OAAOmD,UAI9C,SAAC/G,GAAD,MAAe,CACtCoH,mBAAoB,SAACnI,EAAOc,GAAR,OAAsBC,EZ4DZ,SAACf,EAAOc,GACtC,OAAO,SAACC,GACJ,OAAOhB,EAAsBC,GAAtB,8BAAoDc,IAAaG,MAAK,SAACvE,GAC1EqE,EAASL,EAAiBhE,EAAOrB,WY/DU8M,CAAmBnI,EAAOc,KAC7EsH,sBAAuB,SAACpI,EAAOqI,GAAR,OAAyBtH,EDlDf,SAACf,EAAOqI,GACzC,OAAO,WACH,OAAOtI,GAAsBC,GAAOgB,KAAK,oBAAqBqH,ICgDTD,CAAsBpI,EAAOqI,QAG3EnH,EA3DS,SAACO,GAErB,IAAMgG,EAAc,6CAAG,WAAOnI,GAAP,6FAEZgJ,QAAQ,mEAFI,gCAGL7G,EAAM0G,mBAAmB1G,EAAMzB,MAAOV,GAHjC,uDAMfoI,MAAM,2CACNrF,QAAQC,IAAR,MAPe,yDAAH,sDAWdqF,EAAmB,6CAAG,WAAOU,GAAP,yGAEd5G,EAAM2G,sBAAsB3G,EAAMzB,MAAOqI,GAAcpH,MAAK,SAACvE,GAC/DiJ,GAAGQ,KAAK,oBAAqBzJ,EAAOrB,MAAM,SAACuG,GAAD,OAAWS,QAAQC,IAAIV,SAHjD,sDAMpB8F,MAAM,6CACNrF,QAAQC,IAAR,MAPoB,wDAAH,sDAWzB,OACI,yBAAKC,UAAU,YACNd,EAAMd,SAASxB,KAAI,SAACsF,GACjB,OACI,kBAAC,IAAD,CAAUhG,IAAKgG,EAAQnF,GAAImD,YAAa,kBAAC,GAAD,OACpC,kBAAC,EAAD,CACAhE,IAAKgG,EAAQnF,GACbkI,aAAc/F,EAAM+F,aACpB/C,QAASA,EACTrC,QAASX,EAAMW,QACfuF,oBAAqBA,EACrBF,eAAgBA,EAChBF,SAAU9F,EAAM8F,UAAY9F,EAAM8F,mBCnD/C,YAACgB,EAAiBC,GAC7B,OAAO,SAAC/G,GAAD,OACH,yBAAKc,UAAU,UACX,4BAAQA,UAAU,qBAAqBW,QAAS,kBAAMzB,EAAMW,QAAQjG,KAAK,SACrE,kBAACoM,EAAD,CACA9E,cAAc,EACdF,OAAQ9B,EAAM8B,OACdZ,SAAUlB,EAAMkB,YAGnBlB,EAAMgH,WACH,kBAACD,EAAD,CACAE,kBAAmBjH,EAAMiH,kBACzBC,sBAAuBlH,EAAMkH,sBAC7BvG,QAASX,EAAMW,UAEf,kBAACoG,EAAD,CAAiBI,eAAgBnH,EAAMmH,eAAgBxG,QAASX,EAAMW,aCWvElB,gBARS,SAACC,GAAD,MAAY,CAChC0H,OAAQ1H,EAAMwD,OAAOmD,SAGE,SAAC/G,GAAD,MAAe,CACtC+H,cAAe,SAAChB,GAAD,OAAU/G,EN1BA,SAAC+G,GAAD,MAAW,CACpCvH,KAAM,uBACNuH,QMwBkCgB,CAAchB,QAGrC5G,EAzBY,SAACO,GAExB,OACA,yBAAKc,UAAU,aACX,2BACAE,YAAY,SACZtE,MAAOsD,EAAMoH,OACbtG,UAAU,iBACVhC,KAAK,OACLsG,SARkB,SAACrH,GAAD,OAAOiC,EAAMqH,cAActJ,EAAEsH,OAAO3I,UAStD,4BACAwI,UAAWlF,EAAMoH,OAAOhN,OACxBqH,QAAS,kBAAMzB,EAAMW,QAAQjG,KAAd,yBAAqCsF,EAAMoH,OAAOE,QAAQ,KAAM,QAC/ExG,UAAU,wBAHV,Y,4uDCND,IAmIQrB,gBAZS,SAACC,GAAD,MAAY,CAChCnB,MAAOmB,EAAMb,KAAKN,MAClBW,SAAUQ,EAAMb,KAAKK,aAGE,SAACI,GAAD,mBACvBF,gBAAiB,SAACb,EAAOc,GAAR,OAAsBC,EAASF,EAAgBb,EAAOc,MADhD,mBAEN,SAACd,EAAOc,GAAR,OAAsBC,EAASF,EAAgBb,EAAOc,OAFhD,gCAGE,SAACd,GAAD,OAAWe,EJxHD,SAACf,GACpC,OAAO,WACH,OAAOD,GAAsBC,GAAOjC,IAAI,sBIsHCiL,CAAwBhJ,OAH9C,gCAIE,SAACA,EAAOiJ,GAAR,OAA2BlI,EJ3GjB,SAACf,EAAOiJ,GAC3C,OAAO,WACH,OAAOlJ,GAAsBC,GAAtB,mCAAyDiJ,KIyGPC,CAAwBlJ,EAAOiJ,OAJrE,IAOZ/H,EAnIa,SAACO,GAAU,SAKOC,mBAAS,IALhB,GAK5ByH,EAL4B,KAKbC,EALa,UAMT1H,wBAASC,GANA,GAM5BC,EAN4B,KAMrBC,EANqB,KAQ7BwH,EAAkB,6CAAG,sHAEb5H,EAAMuH,wBAAwBvH,EAAMzB,OAAOiB,MAAK,SAACvE,GACnD0M,EAAiB1M,EAAOrB,MACxBwG,OAASF,MAJM,sDAOnBE,EAAS,kCACTQ,QAAQC,IAAR,MARmB,wDAAH,qDAYlBgH,EAAkB,6CAAG,WAAOhC,EAAU2B,GAAjB,yGAEbxH,EAAMZ,gBAAgBY,EAAMzB,MAAOsH,GAFtB,uBAGb7F,EAAMyH,wBAAwBzH,EAAMzB,MAAOiJ,GAAgBhI,MAAK,SAACvE,GACnE,IAAM6M,EAAmBJ,EAAcxE,QAAO,SAAC0D,GAAD,OAAkBA,EAAahH,MAAQ3E,EAAOrB,QAC5F+N,EAAiBG,MALF,uDAQnB7B,MAAM,yDARa,yDAAH,wDAYlB8B,EAAwB,6CAAG,WAAOP,GAAP,yGAEnBxH,EAAMyH,wBAAwBzH,EAAMzB,MAAOiJ,GAAgBhI,MAAK,SAACvE,GACnE,IAAM+M,EAAmBN,EAAcxE,QAAO,SAAC0D,GAAD,OAAkBA,EAAahH,MAAQ3E,EAAOrB,QAC5F+N,EAAiBK,MAJI,sDAOzB/B,MAAM,yDAPmB,wDAAH,sDA4C9B,OAzBAlE,qBAAU,WACN6F,MACF,IAEF7F,qBAAU,WACNmC,GAAGC,GAAG,WAAW,SAAC8D,GACdN,EAAiB,GAAD,UAAKD,GAAL,CAAoBO,UAEzC,IAEHlG,qBAAU,WAEN,GADA4F,EAAiB3C,EAAa0C,IAC3BA,EAActN,OAAS,EAAE,CACxB,IAAM8N,EAhBH1H,SAAS8D,eAAe,qCAiB3B4D,EAAO5F,MAAM6F,QAAU,IACvB,IAAMC,EAtBH5H,SAAS8D,eAAe,qCAuB3B8D,EAAqBC,iBAAiB,UAAU,YACR,IAAjCD,EAAqBE,UACpB1H,QAAQC,IAAI,gBACZqH,EAAO5F,MAAM6F,QAAU,WAIpC,CAACT,IAGA,yBAAK5G,UAAU,2BACX,2BAAOhC,KAAK,WAAWjB,GAAG,sCAC1B,yBAAKiD,UAAU,gDACX,yBAAKA,UAAU,kBAAkBuB,IAAI,mCACrC,yBAAKxE,GAAG,uCAGJsC,EACI,0BAAMW,UAAU,SAASX,GAEzB,yBAAKW,UAAU,2BACV4G,EAAchK,KAAI,SAACkJ,GAClB,OACE,yBAAK5J,IAAK4J,EAAahH,IAAKkB,UAAU,yBAClC,yBAAKA,UAAU,+BACX,kBAAC,EAAD,CACAkB,cAAc,EACdd,SAAU0F,EAAa3B,OACvB5F,UAAWuH,EAAaf,WACxB,0BAAM/E,UAAU,sBAAsB8F,EAAa3B,OAAnD,gCAEJ,yBAAKnE,UAAU,kCACX,4BACAW,QAAS,SAAC1D,GACVA,EAAEsH,OAAOH,UAAW,EACpB2C,EAAmBjB,EAAaf,SAAUe,EAAahH,MAEvDkB,UAAU,wBALV,UAMA,4BACAW,QAAS,WAAQsG,EAAyBnB,EAAahH,MACvDkB,UAAU,wBAFV,oB,2wCCpGjC,IAAMoD,GAAKqE,OAkBZC,GAASC,GAAeC,GAdN,SAAC1I,GACrB,OACI,yBAAKc,UAAU,iCACX,4BAAQW,QAASzB,EAAMmH,eAAgBrG,UAAU,qBAC7C,yBAAKA,UAAU,kBAAkBuB,IAAI,wBAEzC,4BAAQZ,QAAS,kBAAMzB,EAAMW,QAAQjG,KAAK,iBACtCoG,UAAU,qBACV,yBAAKA,UAAU,kBAAkBuB,IAAI,8BA8GtC5C,gBAdS,SAACC,GAAD,MAAY,CAChCnB,MAAOmB,EAAMb,MAAQa,EAAMb,KAAKN,MAChCoD,UAAWjC,EAAMb,MAAQa,EAAMb,KAAK8C,UACpCT,SAAUxB,EAAMb,MAAQa,EAAMb,KAAKqC,SACnCtB,IAAKF,EAAMb,MAAQa,EAAMb,KAAKe,IAC9B+I,qBAAsBjJ,EAAMwD,OAAOrF,OAGZ,SAACyB,GAAD,MAAe,CACtCH,eAAgB,SAACtB,GAAD,OAAQyB,EAASH,EAAetB,KAChD+K,gBAAiB,SAACrK,GAAD,OAAWe,EhBrED,SAACf,GAC5B,OAAO,SAACe,GACJ,OAAOhB,EAAsBC,GAAOjC,IAAI,cAAckD,MAAK,WACvDF,EAvCqB,CAC7BR,KAAM,oBgBwG+B8J,CAAgBrK,KACrDsK,mBAAoB,SAACtK,GAAD,OAAWe,EhBgBD,SAACf,GAC/B,OAAO,SAACe,GACJ,OAAOhB,EAAsBC,GAAOjC,IAAI,gBAAgBkD,MAAK,SAACvE,GAC1DqE,EAASL,EAAiBhE,EAAOrB,WgBnBDiP,CAAmBtK,QAGhDkB,EA7FK,SAACO,GAAU,SAEKC,wBAASC,GAFd,GAEpBqB,EAFoB,KAEVC,EAFU,KASrB2F,EAAc,6CAAG,sHAETnH,EAAM4I,gBAAgB5I,EAAMzB,OAFnB,OAGfyB,EAAMW,QAAQjG,KAAK,KAHJ,gDAKfuL,MAAM,2CACNrF,QAAQC,IAAR,MANe,yDAAH,qDAUpBkB,qBAAU,WACN+G,IACIvH,GACAwH,GAAMzJ,SAASgG,EAAoB,OAExC,CAAC/D,IAEJQ,qBAAU,WACNmC,GAAGQ,KAAK,OAAQ,CAACxD,SAAUlB,EAAMkB,SAAUtB,IAAKI,EAAMJ,MAAM,SAACO,GACtDA,IACC8F,MAAM9F,GACN6I,SAASC,KAAK,YAGvB,IAEHlH,qBAAU,WACN+G,MACD,IAEH,IAAMA,EAAe,6CAAG,sHAEV9I,EAAM6I,mBAAmB7I,EAAMzB,OAFrB,sDAIhBqC,QAAQC,IAAR,MAJgB,wDAAH,qDAQrB,OACI,yBAAKC,UAAU,QACX,yBAAKA,UAAU,iBACP,kBAAC0H,GAAD,CACAxB,YAAY,EACZrG,QAASX,EAAMW,QACfO,SAAUlB,EAAMkB,SAChBY,OAAQ9B,EAAMJ,IACduH,eAAgBA,IACpB,kBAAC,GAAD,MACC5F,GACG,4BAAQE,QAAS,kBAAMD,OAAYtB,IAAYY,UAAU,+CACrD,yBAAKA,UAAU,qBAAf,OAIXS,EACG,kBAAC,EAAD,CAAMhD,MAAOyB,EAAMzB,QAEnB,yBAAKuC,UAAU,cACX,kBAAC,GAAD,CAAWH,QAASX,EAAMW,UAC1B,kBAAC,GAAD,CACAA,QAASX,EAAMW,QACfpC,MAAOyB,EAAMzB,MACbwH,aAlEK,WACjBvE,GAAY,W,skBC7CL,uBACX7B,EADW,EACXA,cAA0BuJ,EADf,EACIC,UAAyBC,EAD7B,2CAGX,kBAAC,IAAD,MAAWA,EAAX,CAAiBD,UAAa,SAACnJ,GAAD,OAAWL,EACrC,kBAACuJ,EAAclJ,GACd,kBAAC,IAAD,CAAUqJ,GAAG,W,skBCLP,uBACX1J,EADW,EACXA,cAA0BuJ,EADf,EACIC,UAAyBC,EAD7B,2CAGX,kBAAC,IAAD,MAAWA,EAAX,CAAiBD,UAAa,SAACnJ,GAAD,OAAWL,EACpC,kBAAC,IAAD,CAAU0J,GAAG,QAAa,kBAACH,EAAclJ,Q,qkCCD3C,IA4DQP,gBAZS,SAACC,EAAOM,GAAR,MAAmB,CACvCsJ,WAAYtJ,EAAMuJ,MAAMC,OAAOC,YAC/BlL,MAAOmB,EAAMb,MAAQa,EAAMb,KAAKN,MAChCuD,OAAQpC,EAAMb,KAAKe,IACnBsB,SAAUxB,EAAMb,KAAKqC,SACrBS,UAAWjC,EAAMb,KAAK8C,cAGC,SAACrC,GAAD,MAAe,CACtCoK,kBAAmB,SAACnL,EAAOkL,GAAR,OAAwBnK,EnBiDd,SAACf,EAAOkL,GACrC,OAAO,WACH,OAAOnL,EAAsBC,GAAOjC,IAA7B,yBAAmDmN,KmBnDVC,CAAkBnL,EAAOkL,QAGlEhK,EA5Dc,SAACO,GAAU,SAEJC,mBAAS,IAFL,GAE7Bf,EAF6B,KAEnByK,EAFmB,UAGV1J,wBAASC,GAHC,GAG7BC,EAH6B,KAGtBC,EAHsB,KAK9BwJ,EAAa,e,EAAA,G,EAAA,yBAAG,mHAERH,EAAczJ,EAAMsJ,WAAWhC,QAAQ,KAAM,KAFrC,SAGRtH,EAAM0J,kBAAkB1J,EAAMzB,MAAOkL,GAAajK,MAAK,SAACvE,GAC1D0O,EAAY1O,EAAOrB,MACnBwG,OAASF,MALC,uDAQX,KAAEkB,UAAY,KAAEA,SAASxH,MACxBwG,EAAS,KAAEgB,SAASxH,MAExBgH,QAAQC,IAAR,MAXc,wD,iLAAH,qDAmBnB,OAJAkB,qBAAU,WACN6H,MACD,IAGC,yBAAK9I,UAAU,cACVX,EACG,0BAAMW,UAAU,SAASX,GAEzB,yBAAKW,UAAU,qBACX,4BAAQA,UAAU,wCAAwCW,QAAS,kBAAMzB,EAAMW,QAAQjG,KAAK,SACxF,kBAAC,EAAD,CACAwG,SAAUlB,EAAMkB,SAChBc,cAAc,EACdF,OAAQ9B,EAAM8B,UAGlB,kBAAC,GAAD,CACA5C,SAAUA,EACV4G,UAAU,EACVnF,QAASX,EAAMW,QACfpC,MAAOyB,EAAMzB,a,qzCC7C1B,IAAMsL,GAAb,a,mOAAA,U,MAAA,oKACInK,MAAQ,CACJwB,SAAU,EAAKlB,MAAMnB,MAAQ,EAAKmB,MAAMnB,KAAKqC,SAC7CpB,MAAQ,EAAKE,MAAMnB,MAAQ,EAAKmB,MAAM8J,GAAM,EAAK9J,MAAMnB,KAAKiB,MAAQ,eACpEC,SAAW,EAAKC,MAAMnB,MAAQ,EAAKmB,MAAM8J,GAAM,2BAA6B,eAC5E7N,KAAM,EAAK+D,MAAMnB,KAAK5C,KAAO,EAAK+D,MAAMnB,KAAK5C,KAAO,MACpD8N,IAAK,EAAK/J,MAAMnB,KAAKkL,IAAM,EAAK/J,MAAMnB,KAAKkL,IAAM,MACjDC,MAAO,EAAKhK,MAAMnB,KAAKmL,MAAQ,EAAKhK,MAAMnB,KAAKmL,MAAQ,MACvDC,IAAK,EAAKjK,MAAMnB,KAAKoL,IAAM,EAAKjK,MAAMnB,KAAKoL,SAAM/J,EACjDgK,UAAU,GATlB,EAYIC,WAAa,SAACpM,GACV,IAAM9B,EAAO8B,EAAEsH,OAAO3I,MACtB,EAAK0N,SAAU,CAAEnO,UAdzB,EAiBIoO,eAAiB,SAACtM,GACd,IAAMgC,EAAWhC,EAAEsH,OAAO3I,MAC1B,EAAK0N,SAAU,CAAErK,cAnBzB,EAsBIuK,UAAY,SAACvM,GACT,IAAMgM,EAAMhM,EAAEsH,OAAO3I,MACjBqN,EAAIR,MAAM,aACV,EAAKa,SAAU,CAAEL,SAzB7B,EA6BIQ,YAAc,SAACxM,GACX,IAAMiM,EAAQjM,EAAEsH,OAAO3I,MACnBsN,EAAMT,MAAM,aACZ,EAAKa,SAAU,CAAEJ,WAhC7B,EAoCIQ,UAAY,SAACzM,GACT,IAAMkM,EAAMlM,EAAEsH,OAAO3I,MACrB,EAAK0N,SAAU,CAAEH,SAtCzB,EAyCIQ,aAAe,WACX,IAAM1K,EAAWS,SAAS8D,eAAe,qBACrCvE,EAASmF,UACTnF,EAASjB,KAAO,OAChBiB,EAASmF,UAAW,GACZnF,EAASmF,WACjBnF,EAASjB,KAAO,WAChBiB,EAASmF,UAAW,IAhDhC,EAoDIwF,eAAiB,WACb,GAAI,EAAKhL,MAAMK,SAAf,CAGA,IAAMlB,EAAO,CAAEkB,SAAU,EAAKL,MAAMK,UAChC8G,QAAQ,wDAAD,OAAyDhI,EAAKkB,SAA9D,OACP,EAAKC,MAAM2K,OAAO9L,KA1D9B,EA8DI+L,WAAa,WACT,EAAKR,SAAU,CAAEF,UAAU,KA/DnC,EAkEIW,WAAa,WACT,IAAMhM,EAAO,CACTkL,IAAK,EAAKrK,MAAMqK,IAChBE,IAAK,EAAKvK,MAAMuK,IAChBD,MAAO,EAAKtK,MAAMsK,MAClB/N,KAAM,EAAKyD,MAAMzD,MAEjB4K,QAAQ,iDACR,EAAK7G,MAAM2K,OAAO9L,GAEtB,EAAKuL,SAAU,CAAEF,UAAU,KA5EnC,W,EAAA,G,EAAA,gCAgFQ,OACI,yBAAKpJ,UAAU,sBACX,yBAAKA,UAAU,WACX,yBAAKA,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,YACA,2BAAOA,UAAU,2BACbhC,KAAK,OACLpC,MAAOoO,KAAKpL,MAAMwB,SAClBgE,UAAU,KAElB,yBAAKpE,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,SACA,2BAAOA,UAAU,2BACbhC,KAAK,OACLpC,MAAOoO,KAAKpL,MAAMI,MAClBoF,UAAU,KAElB,yBAAKpE,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,YACA,6BACI,2BAAOA,UAAU,2BACbhC,KAAK,WACLjB,GAAG,oBACHnB,MAAOoO,KAAKpL,MAAMK,SAClBqF,SAAU0F,KAAKT,eACfnF,UAAU,IACd,yBAAKpE,UAAU,oBACX,2BAAOhC,KAAK,WAAWjB,GAAG,2CAC1B,0BAAMiD,UAAU,0BAAhB,OACA,4BACIA,UAAU,gEACVW,QAASqJ,KAAKL,cAFlB,QAIIK,KAAK9K,MAAM8J,IACX,4BACIhJ,UAAU,gEACVW,QAASqJ,KAAKJ,gBAFlB,aAOhB,yBAAK5J,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,QACA,2BAAOA,UAAU,2BACbhC,KAAK,OACLpC,MAAOoO,KAAKpL,MAAMzD,KAClBmJ,SAAU0F,KAAKX,WACfjF,UAAW4F,KAAKpL,MAAMwK,YAE9B,yBAAKpJ,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,OACA,2BAAOA,UAAU,2BACbhC,KAAK,OACLiM,UAAU,IACVrO,MAAOoO,KAAKpL,MAAMqK,IAClB3E,SAAU0F,KAAKR,UACfpF,UAAW4F,KAAKpL,MAAMwK,YAE9B,yBAAKpJ,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,OACA,4BACIpE,MAAOoO,KAAKpL,MAAMuK,IAAKnJ,UAAU,2BACjCsE,SAAU0F,KAAKN,UACftF,UAAW4F,KAAKpL,MAAMwK,WACpBY,KAAKpL,MAAMuK,KAAQ,4BAAQe,UAAQ,GAAhB,OACrB,wCACA,4CAGR,yBAAKlK,UAAU,gCACX,0BAAMA,UAAU,0BAAhB,SACA,2BAAOA,UAAU,2BACbQ,UAAU,KACVyJ,UAAU,KACVjM,KAAK,OACLpC,MAAOoO,KAAKpL,MAAMsK,MAClB5E,SAAU0F,KAAKP,YACfrF,UAAW4F,KAAKpL,MAAMwK,aAGlC,6BACCY,KAAK9K,MAAM8J,GACNgB,KAAKpL,MAAMwK,SAGT,4BAAQpJ,UAAU,sBAAsBW,QAASqJ,KAAKD,YAAtD,QAFA,4BAAQ/J,UAAU,sBAAsBW,QAASqJ,KAAKF,YAAtD,QAIH,4C,6BAvKrB,GAA6BK,IAAM/B,W,2wCCMnC,IAcMV,GAASC,GAAeC,GAdN,SAAC1I,GACrB,OACI,yBAAKc,UAAU,iCACX,4BAAQW,QAASzB,EAAMiH,kBAAmBnG,UAAU,qBAChD,yBAAKA,UAAU,kBAAkBuB,IAAI,wBAEzC,4BAAQZ,QAASzB,EAAMkH,sBACnBpG,UAAU,qBACV,yBAAKA,UAAU,kBAAkBuB,IAAI,mCAmJtC5C,gBAZS,SAACC,GAAD,MAAY,CAChCb,KAAMa,EAAMb,KACZN,MAAOmB,EAAMb,MAAQa,EAAMb,KAAKN,UAGT,SAACe,GAAD,MAAe,CACtC4L,cAAe,SAAC3M,EAAO4M,GAAR,OAAoB7L,ErB/EV,SAACf,EAAOS,GACjC,OAAO,SAACM,GACJ,OAAOhB,EAAsBC,GAAO6M,MAAM,MAAnC,KAA8CpM,IAAUQ,MAAK,SAACvE,GACjEqE,EAASP,EAASC,QqB4EkBkM,CAAc3M,EAAO4M,KACjEE,mBAAoB,SAAC9M,GAAD,OAAWe,ErBxFD,SAACf,GAC/B,OAAO,SAACe,GACJ,OAAOhB,EAAsBC,GAAOjC,IAAI,iBAAiBkD,MAAK,WAC1DF,EA/CqB,CAC7BR,KAAM,oBqBmIkCuM,CAAmB9M,KAC3D+M,gBAAiB,SAAC/M,GAAD,OAAWe,ErBnBD,SAACf,GAC5B,OAAO,SAACe,GACJ,OAAOhB,EAAsBC,GAAtB,OAAoC,OAAOiB,MAAK,SAACvE,GACpDqE,EArHqB,CAC7BR,KAAM,oBqBoI+BwM,CAAgB/M,KACrDgN,eAAgB,SAAChN,EAAOiN,GAAR,OAAmBlM,ErB1ET,SAACf,EAAOiN,GAClC,OAAO,SAAClM,GACJ,IAAMmE,EAAW,IAAIC,SAErB,OADAD,EAASE,OAAO,aAAc6H,GACvBlN,EAAsBC,GAC5BgB,KAAK,aAAckE,EAAU,CAAC9E,QAAS,CAAC,eAAgB,yBACxDa,MAAK,WACFF,EAASP,EAAS,CAAC4C,WAAW,SqBmEM4J,CAAehN,EAAOiN,QAGvD/L,EA3IW,SAACO,GAAU,SAEPC,wBAASC,GAFF,GAE1BC,EAF0B,KAEnBC,EAFmB,UAGuBH,wBAASC,GAHhC,GAG1BuL,EAH0B,KAGJC,EAHI,KAK3Bf,EAAM,6CAAG,WAAO9L,GAAP,gGAEkB,KAAtBA,EAAKmL,MAAM5P,QACV6L,MAAM,4GAHH,SAKDjG,EAAMkL,cAAclL,EAAMzB,MAAOM,GALhC,OAMPuB,OAASF,GANF,gDAQJ,KAAEkB,SAASxH,KAAKuG,OACfC,EAAS,KAAEgB,SAASxH,KAAKuG,OAEzB,KAAEiB,SAASxH,MAAiC,OAAzB,KAAEwH,SAASxH,KAAKqE,MACnCmC,EAAS,GAAD,OAAI/F,OAAO6D,KAAK,KAAEkD,SAASxH,KAAKyH,YAAhC,aAEZT,QAAQC,IAAR,MAdO,yDAAH,sDAkBNoG,EAAiB,6CAAG,0GAEfJ,QAAQ,4DAFO,gCAGR7G,EAAMqL,mBAAmBrL,EAAMnB,KAAKN,OAAOiB,MAAK,kBAAMQ,EAAMW,QAAQjG,KAAK,QAHjE,OAKlB0F,OAASF,GALS,gDAOlBE,EAAS,uCACTQ,QAAQC,IAAR,MARkB,yDAAH,qDAYjBqG,EAAqB,6CAAG,0GAEnBL,QAAQ,sEAFW,gCAGZ7G,EAAMsL,gBAAgBtL,EAAMnB,KAAKN,OAAOiB,MAAK,kBAAMQ,EAAMW,QAAQjG,KAAK,QAH1D,OAKtB0F,OAASF,GALa,gDAOtBE,EAAS,+CACTQ,QAAQC,IAAR,MARsB,yDAAH,qDA0CrB8K,EAAY,6CAAG,0GACXC,EAAYpL,SAAS8D,eAAe,4BAC5BC,OAAUqH,EAAUrH,MAAM,IACpCnE,EAAS,+BAHI,kBAMPJ,EAAMuL,eAAevL,EAAMzB,MAAOqN,EAAUrH,MAAM,IAN3C,OAObnE,OAASF,GAPI,gDASbU,QAAQC,IAAR,MACAT,EAAS,0CAVI,QAYjBsL,OAAwBxL,GAZP,yDAAH,qDAelB,OACI,yBAAKY,UAAU,YACX,kBAAC,GAAD,CACAkG,YAAY,EACZrG,QAASX,EAAMW,QACfO,SAAUlB,EAAMnB,KAAKqC,SACrBY,OAAQ9B,EAAMnB,KAAKe,IACnBqH,kBAAmBA,EACnBC,sBAAuBA,IAEvB,yBAAKpG,UAAU,4BACX,2BACAjD,GAAG,0BACHnB,WAAOwD,EACPkF,SApDW,SAACrH,GACpB,IAAMyN,EAPHxL,EAAMnB,KAAK8C,UACHnB,SAASC,cAAc,yBAE3BD,SAASC,cAAc,4BAM9B,GAD6C1C,EAAEsH,OAAOd,MAAM,GAAGtI,KC/EtC4P,MAAM,KAAMC,UACnB,GD+EAvC,MAAM,kBAAxB,CAIA,GAAIvJ,EAAMnB,KAAK8C,UAMX6J,EAAOnJ,IAAM0J,IAAIC,gBAAgBjO,EAAEsH,OAAOd,MAAM,QAN3B,CACrBiH,EAAOlJ,MAAM2J,QAAQ,OACrB,IAAMC,EAAiB1L,SAASC,cAAc,yBAC9CyL,EAAe7J,IAAM0J,IAAIC,gBAAgBjO,EAAEsH,OAAOd,MAAM,IACxD2H,EAAe5J,MAAM2J,QAAU,eAInCP,GAAwB,QAXpBtL,EAAS,sDAiDLtB,KAAK,OAAOqG,OAAO,qCAEfsG,EAEI,4BACA3K,UAAU,mCACVW,QAASkK,GAFT,eAII,4BACA7K,UAAU,mCACVW,QA7CG,WACCjB,SAAS8D,eAAe,2BAChC6H,UAyCI,kBAMhB,0BAAMrL,UAAU,yBAAyBX,GACzC,kBAAC,GAAD,CAAStB,KAAMmB,EAAMnB,KAAMiL,IAAI,EAAMa,OAAQA,Q,qkCE5IzD,IA4DelL,gBATS,SAACC,EAAOM,GAAR,MAAmB,CACvCgD,QAAStD,EAAMb,KAAKK,SAAS+D,MAAK,SAACD,GAAD,OAAahD,EAAMuJ,MAAMC,OAAO4C,UAAYpJ,EAAQpD,OACtFrB,MAAOmB,EAAMb,KAAKN,UAGK,SAACe,GAAD,MAAe,CACtC+M,yBAA0B,SAAC9N,EAAOc,GAAR,OAAsBC,EvBuDZ,SAACf,EAAOc,GAC5C,OAAO,WACH,OAAOf,EAAsBC,GAAOjC,IAA7B,gCAA0D+C,KuBzDZgN,CAAyB9N,EAAOc,QAG9EI,EA5DQ,SAACO,GAAU,SAEcC,mBAAS,IAFvB,GAEvBqM,EAFuB,KAEPC,EAFO,UAIJtM,wBAASC,GAJL,GAIvBC,EAJuB,KAIhBC,EAJgB,UAMJH,wBAASC,GANL,GAMhBsM,GANgB,WAQxBC,EAAmB,e,EAAA,G,EAAA,yBAAG,sHAEdzM,EAAMqM,yBAAyBrM,EAAMzB,MAAOyB,EAAMgD,QAAQnF,IAAI2B,MAAK,SAACvE,GACtEsR,EAAkBtR,EAAOrB,SAHT,OAKpB4S,GAAS,GALW,gDAOpB5L,QAAQC,IAAR,MACG,KAAEO,UACDhB,EAAS,KAAEgB,SAASxH,MATJ,wD,iLAAH,qDAkBzB,OAJAmI,qBAAU,WACN0K,MACD,IAGC,yBAAK3L,UAAU,kBACVX,EACG,0BAAMW,UAAU,SAASX,GAEzBmM,EAAepL,UACX,yBAAKJ,UAAU,6BACX,4BAAQW,QAAS,kBAAMzB,EAAMW,QAAQjG,KAAK,MAC1CoG,UAAU,4EACN,yBAAKA,UAAU,qBAAf,MAEJ,yBAAKA,UAAU,2BACX,kBAAC,EAAD,CACAkB,cAAc,EACdF,OAAQ9B,EAAMgD,QAAQnF,GACtBqD,SAAUlB,EAAMgD,QAAQ9B,WAExB,kBAAC,GAAD,CAAS4I,IAAI,EAAOjL,KAAMyN,UClCzC3L,GAAU+L,MAGVlG,GAAc,kBACvB,yBAAK1F,UAAU,aAsBJrB,gBAJS,SAACC,GAAD,MAAY,CAChCC,cAAeD,EAAMb,QAAUa,EAAMb,KAAKe,OAG/BH,EAlBS,SAACO,GAAD,OACpB,kBAAC,IAAD,CAAQW,QAASA,IACb,kBAAC,IAAD,KACI,kBAAC,GAAD,CAAahB,cAAeK,EAAML,cAAewJ,UAAWwD,EAAMC,KAAK,IAAIC,OAAO,IAClF,kBAAC,GAAD,CAAc1D,UAAW2D,GAAMnN,cAAeK,EAAML,cAAeiN,KAAK,MAAMC,OAAO,IACrF,kBAAC,WAAD,CAAUE,SAAU,kBAAC,GAAD,OACpB,kBAAC,GAAD,CAAc5D,UAAW6D,GAAerN,cAAeK,EAAML,cAAeiN,KAAK,8BAA8BC,OAAO,IAClH,kBAAC,GAAD,CAAc1D,UAAW8D,GAAUtN,cAAeK,EAAML,cAAeiN,KAAK,eAAeC,OAAO,IAClG,kBAAC,GAAD,CAAc1D,UAAW+D,GAAgBvN,cAAeK,EAAML,cAAeiN,KAAK,iCAAiCC,OAAO,U,+sBC/B1I,IAAMM,GAAc,G,4tBCApB,ICiBUpE,GDjBJqE,GAAgB,CAClB/G,KAAM,GACNxI,GAAI,IAGO,cAAiC,IAAhC6B,EAAgC,uDAA1B0N,GAAeC,EAAW,uCAC5C,OAAQA,EAAOvO,MACX,IAAK,uBAAwB,gBAAWY,GAAX,IAAkB2G,KAAKgH,EAAOhH,OAC3D,IAAK,4BAA6B,gBAAW3G,GAAX,IAAkB7B,GAAIwP,EAAOxP,KAC/D,QAAS,OAAO6B,ICFlB4N,GAAkB/P,OAAOgQ,sCAAwCC,KAEjEC,GAAoB,CACtBzQ,IAAK,OACL0Q,cAGEC,GAAqBC,aAAeH,IFX3B,WAAiC,IAAhC/N,EAAgC,uDAAxByN,GAAaE,EAAW,uCAC5C,OAAOA,EAAOvO,MACV,IAAK,WACD,gBAAWuO,EAAOxO,MAAlB,IAAwBN,MAAO8O,EAAO9O,QAC1C,IAAK,cACD,MAAO,GACX,IAAK,YACD,gBAAWmB,GAAU2N,EAAOrO,SAChC,IAAK,WACD,gBAAWqO,EAAOxO,MAAlB,IAAwBN,MAAO8O,EAAO9O,QAC1C,IAAK,qBACD,gBAAWmB,GAAX,IAAkBR,SAAUmO,EAAOnO,WACvC,KAAK2O,KAAQ,MAAO,GACpB,QAAS,OAAOnO,M,4BEQb,CAACqJ,MAPFA,GAAQ+E,aACVC,aAAgB,CACZlP,KAAM8O,GACNzK,OAAQ8K,KACRV,GAAgBW,aAAgBC,QAGzBC,UADGC,aAAarF,MCZrBA,G,GAAAA,MAAOoF,G,GAAAA,UAEfE,GAAM,kBACR,kBAAC,IAAD,CAAUtF,MAAOA,IACb,kBAAC,KAAD,CAAauF,QAAS,KAAMH,UAAWA,IACnC,kBAAC,GAAD,SAMRI,IAASC,OAAO,kBAAC,GAAD,MAAQhO,SAAS8D,eAAe","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([325,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var map = {\n\t\"./af\": 173,\n\t\"./af.js\": 173,\n\t\"./ar\": 174,\n\t\"./ar-dz\": 175,\n\t\"./ar-dz.js\": 175,\n\t\"./ar-kw\": 176,\n\t\"./ar-kw.js\": 176,\n\t\"./ar-ly\": 177,\n\t\"./ar-ly.js\": 177,\n\t\"./ar-ma\": 178,\n\t\"./ar-ma.js\": 178,\n\t\"./ar-sa\": 179,\n\t\"./ar-sa.js\": 179,\n\t\"./ar-tn\": 180,\n\t\"./ar-tn.js\": 180,\n\t\"./ar.js\": 174,\n\t\"./az\": 181,\n\t\"./az.js\": 181,\n\t\"./be\": 182,\n\t\"./be.js\": 182,\n\t\"./bg\": 183,\n\t\"./bg.js\": 183,\n\t\"./bm\": 184,\n\t\"./bm.js\": 184,\n\t\"./bn\": 185,\n\t\"./bn.js\": 185,\n\t\"./bo\": 186,\n\t\"./bo.js\": 186,\n\t\"./br\": 187,\n\t\"./br.js\": 187,\n\t\"./bs\": 188,\n\t\"./bs.js\": 188,\n\t\"./ca\": 189,\n\t\"./ca.js\": 189,\n\t\"./cs\": 190,\n\t\"./cs.js\": 190,\n\t\"./cv\": 191,\n\t\"./cv.js\": 191,\n\t\"./cy\": 192,\n\t\"./cy.js\": 192,\n\t\"./da\": 193,\n\t\"./da.js\": 193,\n\t\"./de\": 194,\n\t\"./de-at\": 195,\n\t\"./de-at.js\": 195,\n\t\"./de-ch\": 196,\n\t\"./de-ch.js\": 196,\n\t\"./de.js\": 194,\n\t\"./dv\": 197,\n\t\"./dv.js\": 197,\n\t\"./el\": 198,\n\t\"./el.js\": 198,\n\t\"./en-au\": 199,\n\t\"./en-au.js\": 199,\n\t\"./en-ca\": 200,\n\t\"./en-ca.js\": 200,\n\t\"./en-gb\": 201,\n\t\"./en-gb.js\": 201,\n\t\"./en-ie\": 202,\n\t\"./en-ie.js\": 202,\n\t\"./en-il\": 203,\n\t\"./en-il.js\": 203,\n\t\"./en-in\": 204,\n\t\"./en-in.js\": 204,\n\t\"./en-nz\": 205,\n\t\"./en-nz.js\": 205,\n\t\"./en-sg\": 206,\n\t\"./en-sg.js\": 206,\n\t\"./eo\": 207,\n\t\"./eo.js\": 207,\n\t\"./es\": 208,\n\t\"./es-do\": 209,\n\t\"./es-do.js\": 209,\n\t\"./es-us\": 210,\n\t\"./es-us.js\": 210,\n\t\"./es.js\": 208,\n\t\"./et\": 211,\n\t\"./et.js\": 211,\n\t\"./eu\": 212,\n\t\"./eu.js\": 212,\n\t\"./fa\": 213,\n\t\"./fa.js\": 213,\n\t\"./fi\": 214,\n\t\"./fi.js\": 214,\n\t\"./fil\": 215,\n\t\"./fil.js\": 215,\n\t\"./fo\": 216,\n\t\"./fo.js\": 216,\n\t\"./fr\": 217,\n\t\"./fr-ca\": 218,\n\t\"./fr-ca.js\": 218,\n\t\"./fr-ch\": 219,\n\t\"./fr-ch.js\": 219,\n\t\"./fr.js\": 217,\n\t\"./fy\": 220,\n\t\"./fy.js\": 220,\n\t\"./ga\": 221,\n\t\"./ga.js\": 221,\n\t\"./gd\": 222,\n\t\"./gd.js\": 222,\n\t\"./gl\": 223,\n\t\"./gl.js\": 223,\n\t\"./gom-deva\": 224,\n\t\"./gom-deva.js\": 224,\n\t\"./gom-latn\": 225,\n\t\"./gom-latn.js\": 225,\n\t\"./gu\": 226,\n\t\"./gu.js\": 226,\n\t\"./he\": 227,\n\t\"./he.js\": 227,\n\t\"./hi\": 228,\n\t\"./hi.js\": 228,\n\t\"./hr\": 229,\n\t\"./hr.js\": 229,\n\t\"./hu\": 230,\n\t\"./hu.js\": 230,\n\t\"./hy-am\": 231,\n\t\"./hy-am.js\": 231,\n\t\"./id\": 232,\n\t\"./id.js\": 232,\n\t\"./is\": 233,\n\t\"./is.js\": 233,\n\t\"./it\": 234,\n\t\"./it-ch\": 235,\n\t\"./it-ch.js\": 235,\n\t\"./it.js\": 234,\n\t\"./ja\": 236,\n\t\"./ja.js\": 236,\n\t\"./jv\": 237,\n\t\"./jv.js\": 237,\n\t\"./ka\": 238,\n\t\"./ka.js\": 238,\n\t\"./kk\": 239,\n\t\"./kk.js\": 239,\n\t\"./km\": 240,\n\t\"./km.js\": 240,\n\t\"./kn\": 241,\n\t\"./kn.js\": 241,\n\t\"./ko\": 242,\n\t\"./ko.js\": 242,\n\t\"./ku\": 243,\n\t\"./ku.js\": 243,\n\t\"./ky\": 244,\n\t\"./ky.js\": 244,\n\t\"./lb\": 245,\n\t\"./lb.js\": 245,\n\t\"./lo\": 246,\n\t\"./lo.js\": 246,\n\t\"./lt\": 247,\n\t\"./lt.js\": 247,\n\t\"./lv\": 248,\n\t\"./lv.js\": 248,\n\t\"./me\": 249,\n\t\"./me.js\": 249,\n\t\"./mi\": 250,\n\t\"./mi.js\": 250,\n\t\"./mk\": 251,\n\t\"./mk.js\": 251,\n\t\"./ml\": 252,\n\t\"./ml.js\": 252,\n\t\"./mn\": 253,\n\t\"./mn.js\": 253,\n\t\"./mr\": 254,\n\t\"./mr.js\": 254,\n\t\"./ms\": 255,\n\t\"./ms-my\": 256,\n\t\"./ms-my.js\": 256,\n\t\"./ms.js\": 255,\n\t\"./mt\": 257,\n\t\"./mt.js\": 257,\n\t\"./my\": 258,\n\t\"./my.js\": 258,\n\t\"./nb\": 259,\n\t\"./nb.js\": 259,\n\t\"./ne\": 260,\n\t\"./ne.js\": 260,\n\t\"./nl\": 261,\n\t\"./nl-be\": 262,\n\t\"./nl-be.js\": 262,\n\t\"./nl.js\": 261,\n\t\"./nn\": 263,\n\t\"./nn.js\": 263,\n\t\"./oc-lnc\": 264,\n\t\"./oc-lnc.js\": 264,\n\t\"./pa-in\": 265,\n\t\"./pa-in.js\": 265,\n\t\"./pl\": 266,\n\t\"./pl.js\": 266,\n\t\"./pt\": 267,\n\t\"./pt-br\": 268,\n\t\"./pt-br.js\": 268,\n\t\"./pt.js\": 267,\n\t\"./ro\": 269,\n\t\"./ro.js\": 269,\n\t\"./ru\": 270,\n\t\"./ru.js\": 270,\n\t\"./sd\": 271,\n\t\"./sd.js\": 271,\n\t\"./se\": 272,\n\t\"./se.js\": 272,\n\t\"./si\": 273,\n\t\"./si.js\": 273,\n\t\"./sk\": 274,\n\t\"./sk.js\": 274,\n\t\"./sl\": 275,\n\t\"./sl.js\": 275,\n\t\"./sq\": 276,\n\t\"./sq.js\": 276,\n\t\"./sr\": 277,\n\t\"./sr-cyrl\": 278,\n\t\"./sr-cyrl.js\": 278,\n\t\"./sr.js\": 277,\n\t\"./ss\": 279,\n\t\"./ss.js\": 279,\n\t\"./sv\": 280,\n\t\"./sv.js\": 280,\n\t\"./sw\": 281,\n\t\"./sw.js\": 281,\n\t\"./ta\": 282,\n\t\"./ta.js\": 282,\n\t\"./te\": 283,\n\t\"./te.js\": 283,\n\t\"./tet\": 284,\n\t\"./tet.js\": 284,\n\t\"./tg\": 285,\n\t\"./tg.js\": 285,\n\t\"./th\": 286,\n\t\"./th.js\": 286,\n\t\"./tk\": 287,\n\t\"./tk.js\": 287,\n\t\"./tl-ph\": 288,\n\t\"./tl-ph.js\": 288,\n\t\"./tlh\": 289,\n\t\"./tlh.js\": 289,\n\t\"./tr\": 290,\n\t\"./tr.js\": 290,\n\t\"./tzl\": 291,\n\t\"./tzl.js\": 291,\n\t\"./tzm\": 292,\n\t\"./tzm-latn\": 293,\n\t\"./tzm-latn.js\": 293,\n\t\"./tzm.js\": 292,\n\t\"./ug-cn\": 294,\n\t\"./ug-cn.js\": 294,\n\t\"./uk\": 295,\n\t\"./uk.js\": 295,\n\t\"./ur\": 296,\n\t\"./ur.js\": 296,\n\t\"./uz\": 297,\n\t\"./uz-latn\": 298,\n\t\"./uz-latn.js\": 298,\n\t\"./uz.js\": 297,\n\t\"./vi\": 299,\n\t\"./vi.js\": 299,\n\t\"./x-pseudo\": 300,\n\t\"./x-pseudo.js\": 300,\n\t\"./yo\": 301,\n\t\"./yo.js\": 301,\n\t\"./zh-cn\": 302,\n\t\"./zh-cn.js\": 302,\n\t\"./zh-hk\": 303,\n\t\"./zh-hk.js\": 303,\n\t\"./zh-mo\": 304,\n\t\"./zh-mo.js\": 304,\n\t\"./zh-tw\": 305,\n\t\"./zh-tw.js\": 305\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 553;","import axios from 'axios';\r\nexport const BASEURL = process.env.BASEURL;\r\n\r\nconst generateAxiosInstance = (token = '') => {\r\n    const axiosInstance = axios.create({\r\n        baseURL: BASEURL,\r\n        headers: {\r\n            // 'Access-Control-Allow-Origin': '*', \r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n    return axiosInstance;\r\n}\r\n\r\nexport const addUser = (user = {}, token) => ({\r\n    type: 'ADD_USER',\r\n    user,\r\n    token\r\n});\r\n\r\nexport const setUser = (user = {}, token) => ({\r\n    type: 'SET_USER',\r\n    user,\r\n    token\r\n});\r\n\r\nexport const removeUser = () => ({\r\n    type: 'REMOVE_USER'\r\n});\r\n\r\nexport const editUser = (updates) => ({\r\n    type: 'EDIT_USER',\r\n    updates\r\n});\r\n\r\nexport const editUserContacts = (contacts) => ({\r\n    type: 'EDIT_USER_CONTACTS',\r\n    contacts\r\n});\r\n\r\nexport const editMessageAlert = (alertValue) => ({\r\n    type: 'MESSAGE_ALERT',\r\n    alertValue\r\n});\r\n\r\nexport const startSignUpUser = (user) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance().post('/users', {...user}).then((result) => {\r\n            dispatch(addUser(result.data.user, result.data.token));\r\n            return result.data.token;\r\n        });\r\n    }\r\n};\r\n\r\nexport const startLogInUser = (email, password) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance().post('/users/login', {email, password}).then((result) => {\r\n            dispatch(addUser(result.data.user, result.data.token));\r\n        });\r\n    }\r\n};\r\n\r\nexport const startLogoutUser = (token) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).get('/me/logout').then(() => {\r\n            dispatch(removeUser());\r\n        });\r\n    }\r\n};\r\n\r\nexport const startLogoutAllUser = (token) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).get('/me/logoutAll').then(() => {\r\n            dispatch(removeUser());\r\n        });\r\n    }\r\n};\r\n\r\nexport const startEditUser = (token, updates) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).patch('/me', {...updates}).then((result) => {\r\n            dispatch(editUser(updates));\r\n        });\r\n    }\r\n};\r\n\r\nexport const startAddAvatar = (token, avatar) => {\r\n    return (dispatch) => {\r\n        const formData = new FormData();\r\n        formData.append('userAvatar', avatar);\r\n        return generateAxiosInstance(token)\r\n        .post('/me/avatar', formData, {headers: {'Content-Type': 'multipart/form-data'}})\r\n        .then(() => {\r\n            dispatch(editUser({hasAvatar: true}));\r\n        });\r\n    }\r\n};\r\n\r\nexport const startHasAvatar = (id) => {\r\n    return () => {\r\n        return generateAxiosInstance().get(`/users/${id}/hasAvatar`);\r\n    }\r\n}\r\n\r\nexport const startDeleteAvatar = (token) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).delete('/me/avatar').then(() => {\r\n            dispatch(editUser({hasAvatar: false}));\r\n        });\r\n    }\r\n};\r\n\r\nexport const startFindContacts = (token, findContact) =>{\r\n    return () => {\r\n        return generateAxiosInstance(token).get(`/me/users/find=${findContact}`);\r\n    }\r\n}\r\n\r\nexport const startFetchContactDetails = (token, contactId) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).get(`/me/contactdetails/id=${contactId}`);\r\n    }\r\n} \r\n\r\nexport const startAddContact = (token, contactId) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).post(`/me/contacts`, {contactId}).then((result) => {\r\n            dispatch(editUserContacts(result.data));\r\n        });\r\n    }\r\n};\r\n\r\nexport const startDeleteContact = (token, contactId) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).delete(`/me/contacts/${contactId}`).then((result) => {\r\n            dispatch(editUserContacts(result.data));\r\n        });\r\n    }\r\n};\r\n\r\nexport const startDeleteUser = (token) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).delete('/me').then((result) => {\r\n            dispatch(removeUser());\r\n        });\r\n    }  \r\n};\r\n\r\nexport const startFetchContacts = (token) => {\r\n    return (dispatch) => {\r\n        return generateAxiosInstance(token).get('/me/contacts').then((result) => {\r\n            dispatch(editUserContacts(result.data));\r\n        });\r\n    }\r\n}","import React, {useState} from 'react';\r\nimport {startLogInUser} from '../actions/user';\r\nimport {connect} from 'react-redux';\r\n\r\nconst LogIn = (props) => {\r\n    \r\n    const [error, setError] = useState(undefined);\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const $form = document.querySelector('form');\r\n        const email = $form.querySelectorAll('input')[0].value;\r\n        const password = $form.querySelectorAll('input')[1].value;\r\n        try{\r\n             await props.startLogInUser(email, password);\r\n             if(props.Authenticated){\r\n                 setError(undefined);\r\n                 props.history.push('/me');\r\n             }\r\n        }catch(e){\r\n            setError('Invalid Credentials. Please check your email or password.');\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n    <div className=\"login\">\r\n            {error && <span className=\"error\">{error}</span>}\r\n            <form className=\"login__form\" onSubmit={onSubmit}>\r\n                <input type=\"text\" required placeholder=\"Email\" className=\"form__input input__login\"/>\r\n                <input type=\"password\" required placeholder=\"Password\" className=\"form__input input__login\"/>\r\n                <button className=\"button__login\">Log In</button>\r\n            </form>\r\n        </div>\r\n    );\r\n} \r\n    \r\nconst mapDispatchToprops = (dispatch) => ({    \r\n    startLogInUser: (email, password) => dispatch(startLogInUser(email, password))\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n    Authenticated: !!state.user._id\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToprops)(LogIn);","import React, {useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {startSignUpUser} from '../actions/user';\r\n\r\nconst SignUp = (props) => {\r\n    \r\n    const [error, setError] = useState(undefined);\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const $form = document.querySelector('form.signup__form');\r\n        const email = $form.querySelectorAll('input')[0].value;\r\n        const username = $form.querySelectorAll('input')[1].value;\r\n        const password = $form.querySelectorAll('input')[2].value;\r\n        const repeatPassword = $form.querySelectorAll('input')[3].value;\r\n        const user = {email, username, password};\r\n        if(password !== repeatPassword){\r\n            return setError(\"Password doesn't match.\");\r\n        }\r\n        if(password.length < 8){\r\n            return setError(\"Password length must be greater than 8.\")\r\n        }\r\n        try{\r\n            await props.startSignUpUser(user);\r\n            setError(undefined);\r\n            props.history.push('/me/settings');\r\n        }catch(e){\r\n            if(e.response.data && e.response.data.code === 11000){\r\n                setError(`${Object.keys(e.response.data.keyPattern)} in use.`);\r\n            }\r\n            console.log(e.response);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"signup\">\r\n            <span className=\"error\">{error}</span>\r\n            <form onSubmit={onSubmit} className=\"signup__form\">\r\n                <input type=\"text\" required className=\"form__input input__login\" placeholder=\"Email\" />\r\n                <input type=\"text\" required className=\"form__input input__login\" placeholder=\"Username\" />\r\n                <input minLength=\"8\" type=\"password\" required className=\"form__input input__login\" placeholder=\"Password\" />\r\n                <input minLength=\"8\" type=\"password\" required className=\"form__input input__login\" placeholder=\"Retype Password\" />\r\n                <button className=\"button__signup\">Sign Up</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startSignUpUser: (user) => dispatch(startSignUpUser(user))\r\n});\r\n\r\nexport default connect(undefined, mapDispatchToProps)(SignUp);","import React, { useState } from 'react';\r\nimport Login from './LoginComponent';\r\nimport SignUp from './SignUpComponent';\r\n\r\nexport default (props) => {\r\n    \r\n    const [showBack, setshowBack] = useState(undefined);\r\n\r\n    return (\r\n        <div className=\"home\">\r\n            <div className=\"home__container\">\r\n                    {/* <div className=\"home__header\"> */}\r\n                    {/* </div> */}\r\n                        {showBack ? (\r\n                            <button onClick={() => setshowBack(false)} className=\"app__button\">\r\n                                <div className=\"app__button__back\">➙</div>\r\n                                {/* <img className=\"app__button__back\" src=\"/images/back.jpg\" /> */}\r\n                            </button>\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                        <div className=\"app__logo__container\">\r\n                            <span className=\"app__logo\">K</span>\r\n                        </div>\r\n                    {showBack ? (\r\n                        <SignUp history={props.history} />\r\n                    ) : (\r\n                        <div className=\"home__login\">\r\n                            <Login history={props.history}/>\r\n                            <span>\r\n                                Don't have an account? Sign Up \r\n                            <button onClick ={() => setshowBack(true)} className=\"button__redirect__signup\">Here.</button>\r\n                            </span>\r\n                        </div>\r\n\r\n                    )}\r\n                </div>\r\n            </div>\r\n    );\r\n}","import axios from 'axios';\r\nconst BASEURL = process.env.BASEURL;\r\n\r\nconst generateAxiosInstance = (token = '') => {\r\n    const instance = axios.create({\r\n        baseURL: BASEURL,\r\n        headers: {\r\n            // 'Access-Control-Allow-Origin': '*', \r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n    return instance;\r\n}\r\n\r\nexport const startFetchMessages = (token, contactId) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).get(`/messages/${contactId}`);\r\n    }\r\n}\r\n\r\nexport const startRemoveMessages = (token, messageId) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).delete(`/messages/${messageId}`);\r\n    }\r\n}\r\n\r\nexport const startPostMessage = (token, message) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).post('/messages', message);\r\n    }\r\n}\r\n\r\nexport const startPostAttachment = (token, messageId, attachment) => {\r\n    return () => {\r\n        const formData = new FormData();\r\n        formData.append('messageAttachment', attachment);\r\n        return generateAxiosInstance(token)\r\n        .post(`/messages/${messageId}/attachment`, formData, {headers: {'Content-Type': 'multipart/form-data'}});\r\n    }\r\n}\r\n\r\nexport const startFetchAttachment = (token, contactId, messageId) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).get(`/messages/${contactId}/${messageId}/attachment`);\r\n    }\r\n}\r\n\r\nexport const startFetchMessageAlert = (token, contactId) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).get(`/messages/${contactId}/messageAlert`);\r\n    }\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { startHasAvatar } from '../actions/user';\r\nimport {BASEURL} from '../actions/user';\r\n\r\nexport const AvatarComponent = (props) => {\r\n\r\n    const [hasAvatar, setHasAvatar] = useState(undefined);\r\n\r\n    const fetchAvatar = async () => {\r\n        try{\r\n            await props.startHasAvatar(props.contactId || props.userId).then((result) => {\r\n                setHasAvatar(result.data);\r\n            });\r\n        }catch(e){\r\n            setHasAvatar(false);\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchAvatar();\r\n        if(props.displaySmall){\r\n            const $contactProfileInitials = document.querySelectorAll('#contactavatar');\r\n            $contactProfileInitials.forEach((initials) => {\r\n                initials.classList.add('profileavatar__initials--contacts__icon');\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        (props.userId) ? (\r\n                    (hasAvatar) ? (\r\n                        <img className=\"profileavatar__image\" src={`${BASEURL}users/${props.userId}/avatar`} />\r\n                    ) : (\r\n                        <div>\r\n                            <img style={{\"display\" : \"none\"}} className=\"profileavatar__image\" src={''}/>\r\n                            <span className=\"profileavatar__initials\">{props.username.toUpperCase().substring(0, 1)}</span>\r\n                        </div>\r\n                    )\r\n            ) : (\r\n                        (hasAvatar) ? (\r\n                            <img className=\"profileavatar__image--contact\" \r\n                            id=\"contactavatar\" \r\n                            src={`${BASEURL}users/${props.contactId}/avatar`} />\r\n                        ) : (\r\n                                    <span id=\"contactavatar\" className=\"profileavatar__initials\">{props.username.toUpperCase().substring(0, 1)}</span>\r\n                        )\r\n))};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startHasAvatar: (id) => dispatch(startHasAvatar(id))\r\n});\r\n\r\nexport default connect(undefined, mapDispatchToProps)(AvatarComponent);","import moment from 'moment';\r\n\r\nexport default (messages) => {\r\n    return messages.sort((a, b) => {\r\n        return moment(a.createdAt).valueOf() < moment(b.createdAt).valueOf() ? 1: -1; \r\n    });\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    startFetchMessages,\r\n    startPostMessage,\r\n    startPostAttachment,\r\n    startFetchAttachment,\r\n    startRemoveMessages\r\n} from '../actions/message';\r\nimport { connect } from 'react-redux';\r\nimport Avatar from './AvatarComponent';\r\nimport { startHasAvatar } from '../actions/user';\r\nimport { io } from './Kuro';\r\nimport filterByDate from '../utils/filterByDateAndText';\r\n\r\n\r\nconst Room = (props) => {\r\n\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState([]);\r\n    const [error, setError] = useState(undefined);\r\n\r\n    const fetchContents = async () => {\r\n        try {\r\n            await props.startFetchMessages(props.token, props.contact.id).then((result) => {\r\n                setMessages(result.data);\r\n            });\r\n            setError(undefined);\r\n        } catch (e) {\r\n            setError(\"Unable to get previous messages. Please try again.\");\r\n        }\r\n    }\r\n\r\n    // useEffect(() => {\r\n    //     setMessages(filterByDate(messages));\r\n    // }, [messages]);\r\n\r\n    useEffect(() => {\r\n        setMessages([...messages, newMessage]);\r\n    }, [newMessage]);\r\n\r\n    useEffect(() => {\r\n        fetchContents();\r\n\r\n        io.on(\"message\", (message) => {\r\n            setNewMessage(message);\r\n        });\r\n    }, []);\r\n\r\n    const onhandleSend = async () => {\r\n        const messageText = document.getElementById(\"messagebox__input__message\").value;\r\n        const attachment = document.getElementById(\"messagebox__input__file\").files[0];\r\n        const message = { message: messageText, receivers: [props.contact.id], seen: false };\r\n        try {\r\n            if (!messageText && !attachment) {\r\n                setError(undefined);\r\n                return;\r\n            }\r\n            await props.startPostMessage(props.token, message)\r\n                .then(async (result) => {\r\n                    if (attachment) {\r\n                        await props.startPostAttachment(props.token, result.data._id, attachment)\r\n                            .then((result) => {\r\n                                io.emit('sendMessage', result.data, (error) => {\r\n                                    if (error) {\r\n                                        return console.log(error);\r\n                                    }\r\n                                });\r\n                                setMessages([...messages, result.data]);\r\n                            });\r\n                    }\r\n                    io.emit('sendMessage', result.data, (error) => {\r\n                        if (error) {\r\n                            return console.log(error);\r\n                        }\r\n                    });\r\n                    setMessages([...messages, result.data]);\r\n                });\r\n            setError(undefined);\r\n            document.getElementById(\"messagebox__input__message\").value = '';\r\n            setAttachmentTitleOnSpan(\"\");\r\n        } catch (e) {\r\n            setError(\"Unable to send. Please try again.\");\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n\r\n    const handleDeleteMessage = async (messageId) => {\r\n        try {\r\n            await props.startRemoveMessages(props.token, messageId).then((result) => {\r\n                const newMessages = messages.map((message) => {\r\n                    if (message._id === result.data._id) {\r\n                        message.message = result.data.message;\r\n                    }\r\n                    return message;\r\n                });\r\n                setMessages(newMessages);\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const setAttachmentTitleOnSpan = (title) => {\r\n        const attachmentTitle = document.querySelector('.input__attachment__title');\r\n        attachmentTitle.innerText = title;\r\n    }\r\n\r\n    const onhandleAttachment = (e) => {\r\n        setAttachmentTitleOnSpan(e.target.files[0].name);\r\n    }\r\n\r\n    return (\r\n        <div className=\"room\">\r\n            <div className=\"room__container\">\r\n                <Avatar\r\n                    username={props.contact.username}\r\n                    displaySmall={false}\r\n                    hasAvatar={props.contact.hasAvatar}\r\n                    contactId={props.contact.id} />\r\n                <span className=\" room__contact__username\">{props.contact.username}</span>\r\n                <div className=\"room__chatbox\">\r\n                    {filterByDate(messages).map((message) => {\r\n                        if (message.sender === props._id) {\r\n                            return (\r\n                                <div key={message._id} className=\"chatbox__messagebox message--sentmessage\">\r\n                                    {/* {message.attachment && \r\n                                    <input\r\n                                    className=\"chatbox__message__input\"\r\n                                    type=\"file\"\r\n                                    value={message.attachment.attached.data} />} */}\r\n                                    <span className=\"chatbox__message\">{message.message}</span>\r\n                                    <div className=\"chatbox__options\">\r\n                                        <input type=\"checkbox\" id=\"chatbox__messagebox__options__checkbox\" />\r\n                                        <span className=\"contact__options__dots\">...</span>\r\n                                        <button disabled={(message.sender !== props._id) ? true : false}\r\n                                            className=\"chatbox__messagebox__option__button\"\r\n                                            onClick={() => handleDeleteMessage(message._id)}>\r\n                                            Delete\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        }\r\n                        return (\r\n                            <div key={message._id} className=\"chatbox__messagebox\">\r\n                                {/* {message.attachment && <input\r\n                                    className=\"chatbox__message__input\"\r\n                                    type=\"file\"\r\n                                    value={message.attachment} />} */}\r\n                                <span className=\"chatbox__message\">{message.message}</span>\r\n                                <div className=\"chatbox__options\">\r\n                                    <input type=\"checkbox\" id=\"chatbox__messagebox__options__checkbox\" />\r\n                                    <span className=\"contact__options__dots\">...</span>\r\n                                    <button disabled={(message.sender !== props._id) ? true : false}\r\n                                        className=\"chatbox__messagebox__option__button\"\r\n                                        onClick={() => handleDeleteMessage(message._id)}>\r\n                                        Delete\r\n                                </button>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n                <div className=\"chatbox__messgaebox\">\r\n                        <span className=\"error\">{error}</span>\r\n                        <span className=\"input__attachment__title\"></span>\r\n                        <div className=\"messagebox__input__container\">\r\n                            <input type=\"text\" id=\"messagebox__input__message\" />\r\n                            <div className=\"messagebox__input__attachment\">\r\n                                <input \r\n                                type=\"file\"\r\n                                accept=\"image/*, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/msword, application/pdf\"\r\n                                value={undefined}\r\n                                onChange={onhandleAttachment}\r\n                                id=\"messagebox__input__file\" />\r\n                                <img\r\n                                    className=\"app__buttonlogo\"\r\n                                    src=\"/images/attachment.png\" />\r\n                            </div>\r\n                            <button onClick={onhandleSend} className=\"button__messagebox\">Send</button>\r\n                        </div>\r\n                    </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startFetchMessages: (token, contactId) => dispatch(startFetchMessages(token, contactId)),\r\n    startPostMessage: (token, message) => dispatch(startPostMessage(token, message)),\r\n    startPostAttachment: (token, messageId, attachment) => dispatch(startPostAttachment(token, messageId, attachment)),\r\n    startFetchAttachment: (token, contactId, messageId) => dispatch(startFetchAttachment(token, contactId, messageId)),\r\n    startHasAvatar: (id) => dispatch(startHasAvatar(id)),\r\n    startRemoveMessages: (token, messageId) => dispatch(startRemoveMessages(token, messageId))\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    const contact = state.user.contacts.find((contact) => contact.id === state.filter.id);\r\n    return {\r\n        contact,\r\n        username: state.user.username,\r\n        _id: state.user._id\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Room);","export const setfilterText = (text) => ({\r\n    type: 'FILTER__BY__USERNAME',\r\n    text\r\n});\r\n\r\nexport const setCurrentContactId = (id) => ({\r\n    type: 'SET__CURRENT__CONTACT__ID',\r\n    id\r\n});","import React, { useEffect } from 'react';\r\nimport Avatar from './AvatarComponent';\r\nimport {connect} from 'react-redux';\r\nimport {setCurrentContactId} from '../actions/filter';\r\nimport {startFetchMessageAlert} from '../actions/message';\r\nimport {io} from './Kuro';\r\n\r\n\r\nexport const Contact = (props) => {\r\n\r\n    const enterRoom = () => {\r\n        props.setCurrentContactId(props.contact.id);\r\n        props.onhandleBack();\r\n    };\r\n\r\n    const sendFriendRequest = (e) => {\r\n        alert(\"Request Sent.\");\r\n        props.onhandleSendRequest({requestType: \"friend__Request\", receiverId: props.contact.id});\r\n        e.target.disabled = true;\r\n    };\r\n\r\n    const changeStyleOnMessageAlert = () => {\r\n        const contactTitle = document.getElementById(`${props.contact.id}`);\r\n        contactTitle.style.fontWeight = \"600\";\r\n    }\r\n\r\n    const fetchMessageAlert = async () => {\r\n        try{\r\n            await props.startFetchMessageAlert(props.token, props.contact.id).then((result) => {\r\n                if(!result.data){\r\n                    changeStyleOnMessageAlert();\r\n                }\r\n            });\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchMessageAlert();\r\n        io.on(\"messageAlert\", (sender) => {\r\n            if(sender.senderId === props.contact.id){\r\n                changeStyleOnMessageAlert();\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n            <div className=\"contact\">\r\n                <button disabled={props.onSearch} className=\"contact__button__enterroom\" onClick={enterRoom}>\r\n                        {/* {(props.hasAvatar) ? (\r\n                            <img className=\"profile__avatar\" src={`http://localhost:3000/users/${props.contact.id}/avatar`} />\r\n                            ) : (\r\n                                <img className=\"profile__avatar\" src=\"/images/avatar__unavilable.jpg\" />\r\n                            )} */}\r\n                        <Avatar \r\n                        username={props.contact.username} \r\n                        contactId={props.contact.id} \r\n                        displaySmall={true} \r\n                        hasAvatar={props.contact.hasAvatar} />\r\n                </button>\r\n                        <span id={props.contact.id} className=\"contact__username\">{props.contact.username}</span>\r\n                    <div className=\"contact__options\">\r\n                        <input id=\"contact__options__checkbox\" type=\"checkbox\" />\r\n                        <div className=\"contact__options__dots\">\r\n                            <span>.</span>\r\n                            <span>.</span>\r\n                            <span>.</span>\r\n                        </div>\r\n                        <div className=\"contact__options__buttons__container\">\r\n                            <button className=\"contact__options__button\"\r\n                            disabled={!props.contactPositionId[0]}\r\n                            onClick={() => props.history.push(`/me/contactdetails/id=${(props.contact._id || props.contactPositionId)}`)\r\n                            }>Details</button>\r\n                            {props.contactExists ?\r\n                            (\r\n                                <button className=\"contact__options__button\"\r\n                                onClick={() => props.onhandleRemove(props.contact.id)\r\n                                }>Remove</button>\r\n                            ):\r\n                            (\r\n                                <button className=\"contact__options__button\"\r\n                                onClick={sendFriendRequest}>Add</button>\r\n                            )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n            </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    // const contactExists = state.user.contacts.map((contact) => {\r\n    //     if (contact.id === props.contact.id) {\r\n    //         return true;\r\n    //     }\r\n    // }).filter((contact) => contact !== undefined);\r\n    const contactPositionId = state.user.contacts.map((contact) => {\r\n        if(contact.id === props.contact.id){\r\n            return contact._id;\r\n        }\r\n        return undefined;\r\n    }).filter((_id) => _id !== undefined);\r\n\r\n    return {\r\n        token: state.user.token,\r\n        contactPositionId,\r\n        contactExists: (contactPositionId.length <= 0) ? false : true,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setCurrentContactId: (id) => dispatch(setCurrentContactId(id)),\r\n    startFetchMessageAlert: (token, contactId) => dispatch(startFetchMessageAlert(token, contactId))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Contact);\r\n","export default (contacts, text=\"\") => {\r\n    return contacts.filter((contact) => contact.username.toLowerCase().includes(text.toLowerCase()));\r\n}","import axios from 'axios';\r\nconst BASEURL = process.env.BASEURL;\r\n\r\nconst generateAxiosInstance = (token = '') => {\r\n    const instance = axios.create({\r\n        baseURL: BASEURL,\r\n        headers: {\r\n            // 'Access-Control-Allow-Origin': '*', \r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n    return instance;\r\n}\r\n\r\n\r\nexport const startFetchNotifications = (token) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).get('/me/notifications');\r\n    }\r\n}\r\n\r\n//Notification object needs to have requestType, username as sender, senderId, receiverId.\r\n//Sender username and id is add on server. So, I just need requestType and receiverId\r\nexport const startPostNotification = (token, notification) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).post('/me/notifications', notification);\r\n    }\r\n}\r\n\r\nexport const startRemoveNotification = (token, notificationId) => {\r\n    return () => {\r\n        return generateAxiosInstance(token).delete(`/me/notifications/${notificationId}`);\r\n    }\r\n}","import React from 'react';\r\nimport Contact from './ContactComponent';\r\nimport { connect } from 'react-redux';\r\nimport {startDeleteContact} from '../actions/user';\r\nimport LazyLoad from 'react-lazyload';\r\nimport filterContactsByText from '../selector/filterContacts';\r\nimport {startPostNotification} from '../actions/notification';\r\nimport {io} from './Kuro';\r\n\r\n\r\nconst Placeholder = () => (\r\n    <div className=\"contact__placeholder\">\r\n        <div className=\"contact__placeholder__avatarplaceholder\"></div>\r\n        <div className=\"contact__username\"></div>\r\n    </div>\r\n);\r\n\r\nexport const Contacts = (props) => {\r\n    \r\n    const onhandleRemove = async (id) => {\r\n        try{\r\n            if(confirm(\"Are you sure you want to delete this person from your contacts?\")){\r\n                await props.startDeleteContact(props.token, id);\r\n            }\r\n        }catch(e){\r\n            alert(\"An error has occured. Please try again.\");\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const onhandleSendRequest = async (notification) => {\r\n        try{\r\n            await props.startPostNotification(props.token, notification).then((result) => {\r\n                io.emit(\"sendFriendRequest\", result.data, (error) => console.log(error));\r\n            });\r\n        }catch(e){\r\n            alert(\"Unexpected error. Please try again later.\");\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"contacts\">\r\n                {props.contacts.map((contact) => {\r\n                    return (\r\n                        <LazyLoad key={contact.id} placeholder={<Placeholder />} >\r\n                            <Contact\r\n                            key={contact.id}\r\n                            onhandleBack={props.onhandleBack}\r\n                            contact={contact}\r\n                            history={props.history}\r\n                            onhandleSendRequest={onhandleSendRequest}\r\n                            onhandleRemove={onhandleRemove}\r\n                            onSearch={props.onSearch && props.onSearch}\r\n                            />\r\n                        </LazyLoad>\r\n                    )\r\n                })}\r\n            </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    if(props.onSearch){\r\n        return;\r\n    }\r\n    return {\r\n        contacts: filterContactsByText(state.user.contacts, state.filter.text),\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startDeleteContact: (token, contactId) => dispatch(startDeleteContact(token, contactId)),\r\n    startPostNotification: (token, notification) => dispatch(startPostNotification(token, notification))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Contacts);\r\n","import React from 'react';\r\n\r\nexport default (AvatarComponent, ButtonComponent) => {\r\n    return (props) => (\r\n        <div className=\"header\">\r\n            <button className=\"avatar__redirector\" onClick={() => props.history.push('/me')}>\r\n                <AvatarComponent \r\n                displaySmall={false}\r\n                userId={props.userId} \r\n                username={props.username}\r\n                />\r\n            </button>\r\n            {props.onSettings ? (\r\n                <ButtonComponent \r\n                onhandleLogoutAll={props.onhandleLogoutAll} \r\n                onhandleRemoveAccount={props.onhandleRemoveAccount}\r\n                history={props.history}/>\r\n            ) : (\r\n                <ButtonComponent onhandleLogout={props.onhandleLogout} history={props.history}/>\r\n            )}\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { setfilterText }  from '../actions/filter';\r\n\r\nconst SearchBarComponent = (props) => {\r\n    const setFilterText = (e) => props.setfilterText(e.target.value);\r\n    return (\r\n    <div className=\"searchBar\">\r\n        <input \r\n        placeholder=\"Search\"\r\n        value={props.search}\r\n        className=\"searchBarInput\" \r\n        type=\"text\"\r\n        onChange={setFilterText}/>    \r\n        <button\r\n        disabled={!props.search.length}\r\n        onClick={() => props.history.push(`/me/users/find=${props.search.replace(/ /g, '_')}`)} \r\n        className=\"kuro__search__button\">Find</button>\r\n    </div>\r\n)};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    search: state.filter.text\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setfilterText: (text) => dispatch(setfilterText(text))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBarComponent);","import React, { useEffect, useState } from 'react';\r\nimport Avatar from './AvatarComponent';\r\nimport { startAddContact } from '../actions/user';\r\nimport { startFetchNotifications, startRemoveNotification } from '../actions/notification';\r\nimport { io } from './Kuro';\r\nimport { connect } from 'react-redux';\r\nimport filterByDate from '../utils/filterByDateAndText';\r\n\r\nexport const Notification = (props) => {\r\n\r\n    //Notification should have type(friendrequest, etc. sender username and id and receiver's id.\r\n    //for messages, we can just use io.listen for new messages)\r\n\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [error, setError] = useState(undefined);\r\n    \r\n    const fetchNotifications = async () => {\r\n        try {\r\n            await props.startFetchNotifications(props.token).then((result) => {\r\n                setNotifications(result.data);\r\n                setError(undefined);\r\n            });\r\n        } catch (e) {\r\n            setError(\"Unable to fetch notifications.\");\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const onhandleAddContact = async (senderId, notificationId) => {\r\n        try {\r\n            await props.startAddContact(props.token, senderId);\r\n            await props.startRemoveNotification(props.token, notificationId).then((result) => {\r\n                const newNotificaitons = notifications.filter((notification) => notification._id !== result.data);\r\n                setNotifications(newNotificaitons);\r\n            });\r\n        } catch (e) {\r\n            alert(\"Unexpected error has occured. Please try again later!\");\r\n        }\r\n    };\r\n\r\n    const handleRemoveNotification = async (notificationId) => {\r\n        try {\r\n            await props.startRemoveNotification(props.token, notificationId).then((result) => {\r\n                const newNotifications = notifications.filter((notification) => notification._id !== result.data);\r\n                setNotifications(newNotifications);\r\n            });\r\n        } catch (e) {\r\n            alert(\"Unexpected error has occured. Please try again later!\");\r\n        }\r\n    }\r\n\r\n    const getmessageAlertCheckBox = () => {\r\n        return document.getElementById('notification__container__checkbox');\r\n    }\r\n\r\n    const getmessageAlertRedDot = () => {\r\n        return document.getElementById('notification__alert__icon__reddot');\r\n    }    \r\n\r\n    useEffect(() => {\r\n        fetchNotifications();\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        io.on(\"request\", (request) => {\r\n            setNotifications([...notifications, request]);\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setNotifications(filterByDate(notifications));\r\n        if(notifications.length > 0){\r\n            const redDot = getmessageAlertRedDot();\r\n            redDot.style.opacity = \"1\";\r\n            const messageAlertCheckBox = getmessageAlertCheckBox();\r\n            messageAlertCheckBox.addEventListener(\"change\", () => {\r\n                if(messageAlertCheckBox.checked === true){\r\n                    console.log(\"When clicked\");\r\n                    redDot.style.opacity = \"0\";\r\n                }\r\n            });\r\n        }\r\n    }, [notifications]);\r\n\r\n    return (\r\n        <div className=\"notification__container\">\r\n            <input type=\"checkbox\" id=\"notification__container__checkbox\" />\r\n            <div className=\"notification__container__notification__icons\">\r\n                <img className=\"app__buttonlogo\" src=\"/images/notification--icon.png\" />\r\n                <div id=\"notification__alert__icon__reddot\"></div>\r\n            </div>\r\n                {\r\n                    error ? (\r\n                        <span className=\"error\">{error}</span>\r\n                    ) : (\r\n                        <div className=\"notifications__requests\">\r\n                            {notifications.map((notification) => {\r\n                              return (\r\n                                <div key={notification._id} className=\"notification__request\">\r\n                                    <div className=\"notification__request__info\">\r\n                                        <Avatar \r\n                                        displaySmall={true} \r\n                                        username={notification.sender}\r\n                                        contactId={notification.senderId} />\r\n                                        <span className=\"notification__info\">{notification.sender} sent you a friend request.</span>\r\n                                    </div>\r\n                                    <div className=\"notification__request__options\">\r\n                                        <button\r\n                                        onClick={(e) => {\r\n                                        e.target.disabled = true;\r\n                                        onhandleAddContact(notification.senderId, notification._id);\r\n                                        }}\r\n                                        className=\"notification__button\">Accept</button>\r\n                                        <button\r\n                                        onClick={() => { handleRemoveNotification(notification._id) }}\r\n                                        className=\"notification__button\">Delete</button>\r\n                                    </div>\r\n                                </div>\r\n                                )   \r\n                            } \r\n                        )}\r\n                    </div>\r\n                    )}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    token: state.user.token,\r\n    contacts: state.user.contacts\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startAddContact: (token, contactId) => dispatch(startAddContact(token, contactId)),\r\n    startAddContact: (token, contactId) => dispatch(startAddContact(token, contactId)),\r\n    startFetchNotifications: (token) => dispatch(startFetchNotifications(token)),\r\n    startRemoveNotification: (token, notificationId) => dispatch(startRemoveNotification(token, notificationId))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notification);","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Room from './RoomComponent';\r\nimport Contacts from './ContactsComponent';\r\nimport { startLogoutUser, startHasAvatar, startFetchContacts } from '../actions/user';\r\nimport Avatar from './AvatarComponent';\r\nimport generateHeader from '../components/HeaderComponent';\r\nimport SearchBar from './SearchBarComponent';\r\nimport socketIoClient from 'socket.io-client';\r\nimport Notification from './NotificationsComponet';\r\nimport {setCurrentContactId} from '../actions/filter';\r\nimport {store} from '../index';\r\n// export const io = socketIoClient(\"http://localhost:3001\");\r\nexport const io = socketIoClient();\r\n\r\n//Remember to change static url into dynamic by feeding process.env data to webpack.\r\n\r\nconst buttonComponent = (props) => {\r\n    return (\r\n        <div className=\"kuro__header__buttoncomponent\">\r\n            <button onClick={props.onhandleLogout} className=\"app__logo__button\">\r\n                <img className=\"app__buttonlogo\" src=\"/images/logout.png\" />\r\n            </button>\r\n            <button onClick={() => props.history.push('/me/settings')}\r\n                className=\"app__logo__button\">\r\n                <img className=\"app__buttonlogo\" src=\"/images/settings.png\" />\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Header = generateHeader(Avatar, buttonComponent);\r\n\r\n// const AvatarComponent = () => {\r\n//     return (\r\n//             <Avatar userId={props.id} hasAvatar={props.hasAvatar} />\r\n//         <button className=\" app__back__button\" onClick={onhandleAvatar}>\r\n//             {/* <img className=\"avatar\" src={`http://localhost:3000/users/avatar/${props.id}`}/> */}\r\n//         </button>\r\n//     );\r\n// }\r\n\r\nexport const Kuro = (props) => {\r\n\r\n    const [showBack, setshowBack] = useState(undefined);\r\n\r\n\r\n    const onhandleBack = () => {\r\n        setshowBack(true);\r\n    }\r\n\r\n    const onhandleLogout = async () => {\r\n        try {\r\n            await props.startLogoutUser(props.token);\r\n            props.history.push('/');\r\n        }catch(e){\r\n            alert(\"An error has occured. Please try again.\");\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        RefetchContacts();\r\n        if(!showBack){\r\n            store.dispatch(setCurrentContactId(\"\"));\r\n        }\r\n    }, [showBack]);\r\n\r\n    useEffect(() => {\r\n        io.emit('join', {username: props.username, _id: props._id}, (error)=>{\r\n            if(error){\r\n                alert(error);\r\n                location.href='/me';\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        RefetchContacts();\r\n    }, []);\r\n\r\n    const RefetchContacts = async () => {\r\n        try{\r\n            await props.startFetchContacts(props.token);\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"kuro\">\r\n            <div className=\"kuro__options\">\r\n                    <Header\r\n                    onSettings={false}\r\n                    history={props.history}\r\n                    username={props.username}\r\n                    userId={props._id}\r\n                    onhandleLogout={onhandleLogout} />\r\n                <Notification/>\r\n                {showBack &&\r\n                    <button onClick={() => setshowBack(undefined)} className=\" app__logo__button kuro__home__button__back\">\r\n                        <div className=\"app__button__back\">➙</div>\r\n                    </button>\r\n                }\r\n            </div>\r\n            {showBack ? (\r\n                <Room token={props.token} />\r\n            ) : (\r\n                <div className=\"kuro__home\">\r\n                    <SearchBar history={props.history}/>\r\n                    <Contacts\r\n                    history={props.history}\r\n                    token={props.token}\r\n                    onhandleBack={onhandleBack}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    token: state.user && state.user.token,\r\n    hasAvatar: state.user && state.user.hasAvatar,\r\n    username: state.user && state.user.username,\r\n    _id: state.user && state.user._id,\r\n    currentRoomContactId: state.filter.id\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startHasAvatar: (id) => dispatch(startHasAvatar(id)),\r\n    startLogoutUser: (token) => dispatch(startLogoutUser(token)),\r\n    startFetchContacts: (token) => dispatch(startFetchContacts(token))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Kuro);","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nexport default ({\r\n    Authenticated, component: Component, ...rest\r\n}) => (\r\n    <Route {...rest} component = {(props) => Authenticated ? (\r\n        <Component {...props} />\r\n    ) : (<Redirect to='/' />)} />\r\n);","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nexport default ({\r\n    Authenticated, component: Component, ...rest\r\n}) => (\r\n    <Route {...rest} component = {(props) => Authenticated ? \r\n        (<Redirect to='/me' />) : (<Component {...props} />)} />\r\n);","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {startFindContacts} from '../actions/user';\r\nimport Contacts from './ContactsComponent';\r\nimport Avatar from './AvatarComponent';\r\n\r\nexport const SearchContact = (props) => {\r\n\r\n    const [contacts, setContacts] = useState([]);\r\n    const [error, setError] = useState(undefined);\r\n    \r\n    const fetchContacts = async () => {\r\n        try{\r\n            const findContact = props.searchText.replace(/_/g, ' ');\r\n            await props.startFindContacts(props.token, findContact).then((result) => {\r\n                setContacts(result.data);\r\n                setError(undefined);\r\n            });\r\n        }catch(e){\r\n            if(e.response && e.response.data){\r\n                setError(e.response.data);\r\n            }\r\n            console.log(e);\r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        fetchContacts();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"searchpage\">\r\n            {error ? (\r\n                <span className=\"error\">{error}</span>\r\n            ) : (\r\n                <div className=\"searchpage__finds\">\r\n                    <button className=\"avatar__redirector searchpage__avatar\" onClick={() => props.history.push(\"/me\")}>\r\n                        <Avatar \r\n                        username={props.username}\r\n                        displaySmall={false} \r\n                        userId={props.userId} \r\n                    />\r\n                    </button>\r\n                    <Contacts\r\n                    contacts={contacts}\r\n                    onSearch={true}\r\n                    history={props.history}\r\n                    token={props.token}/>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n    searchText: props.match.params.findContact,\r\n    token: state.user && state.user.token,\r\n    userId: state.user._id,\r\n    username: state.user.username,\r\n    hasAvatar: state.user.hasAvatar\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startFindContacts: (token, findContact) => dispatch(startFindContacts(token, findContact))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchContact);","import React from 'react';\r\n\r\nexport class Details extends React.Component {\r\n    state = {\r\n        username: this.props.user && this.props.user.username,\r\n        email: (this.props.user && this.props.me) ? this.props.user.email : \"Unauthorized\",\r\n        password: (this.props.user && this.props.me) ? \"You can't view password.\" : \"Unauthorized\",\r\n        name: this.props.user.name ? this.props.user.name : 'N/A',\r\n        age: this.props.user.age ? this.props.user.age : 'N/A',\r\n        phone: this.props.user.phone ? this.props.user.phone : 'N/A',\r\n        sex: this.props.user.sex ? this.props.user.sex : undefined,\r\n        editable: false\r\n    }\r\n\r\n    handleName = (e) => {\r\n        const name = e.target.value;\r\n        this.setState(({ name }));\r\n    }\r\n\r\n    handlePassword = (e) => {\r\n        const password = e.target.value;\r\n        this.setState(({ password }));\r\n    }\r\n\r\n    handleAge = (e) => {\r\n        const age = e.target.value;\r\n        if (age.match(/^[0-9]*$/)) {\r\n            this.setState(({ age }));\r\n        }\r\n    }\r\n\r\n    handlePhone = (e) => {\r\n        const phone = e.target.value;\r\n        if (phone.match(/^[0-9]*$/)) {\r\n            this.setState(({ phone }));\r\n        }\r\n    }\r\n\r\n    handleSex = (e) => {\r\n        const sex = e.target.value;\r\n        this.setState(({ sex }));\r\n    }\r\n\r\n    showPassword = () => {\r\n        const password = document.getElementById('userDetails__pass');\r\n        if (password.disabled) {\r\n            password.type = \"text\";\r\n            password.disabled = false;\r\n        } else if (!password.disabled) {\r\n            password.type = \"password\";\r\n            password.disabled = true;\r\n        }\r\n    }\r\n\r\n    changePassword = () => {\r\n        if(!this.state.password){\r\n            return;\r\n        }\r\n        const user = { password: this.state.password };\r\n        if (confirm(`Are you sure you want to save this as your password: ${user.password}?`)) {\r\n            this.props.onSave(user);\r\n        }\r\n    }\r\n\r\n    handleEdit = () => {\r\n        this.setState(({ editable: true }));\r\n    }\r\n\r\n    handleSave = () => {\r\n        const user = {\r\n            age: this.state.age,\r\n            sex: this.state.sex,\r\n            phone: this.state.phone,\r\n            name: this.state.name\r\n        }\r\n        if (confirm('Are you sure you want to make these changes?')) {\r\n            this.props.onSave(user);\r\n        }\r\n        this.setState(({ editable: false }));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"details__container\">\r\n                <div className=\"details\">\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Username</span>\r\n                        <input className=\"input__login form__input\"\r\n                            type=\"text\"\r\n                            value={this.state.username}\r\n                            disabled={true} />\r\n                    </div>\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Email</span>\r\n                        <input className=\"input__login form__input\"\r\n                            type=\"text\"\r\n                            value={this.state.email}\r\n                            disabled={true} />\r\n                    </div>\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Password</span>\r\n                        <div>\r\n                            <input className=\"input__login form__input\"\r\n                                type=\"password\"\r\n                                id=\"userDetails__pass\"\r\n                                value={this.state.password}\r\n                                onChange={this.handlePassword}\r\n                                disabled={true} />\r\n                            <div className=\"chatbox__options\">\r\n                                <input type=\"checkbox\" id=\"chatbox__messagebox__options__checkbox\" />\r\n                                <span className=\"contact__options__dots\">...</span>\r\n                                <button\r\n                                    className=\"chatbox__messagebox__option__button details__password__button\"\r\n                                    onClick={this.showPassword}>Show</button>\r\n                                {\r\n                                    this.props.me &&\r\n                                    <button\r\n                                        className=\"chatbox__messagebox__option__button details__password__button\"\r\n                                        onClick={this.changePassword}>Change</button>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Name</span>\r\n                        <input className=\"input__login form__input\"\r\n                            type=\"text\"\r\n                            value={this.state.name}\r\n                            onChange={this.handleName}\r\n                            disabled={!this.state.editable} />\r\n                    </div>\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Age</span>\r\n                        <input className=\"input__login form__input\"\r\n                            type=\"text\"\r\n                            maxLength=\"2\"\r\n                            value={this.state.age}\r\n                            onChange={this.handleAge}\r\n                            disabled={!this.state.editable} />\r\n                    </div>\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Sex</span>\r\n                        <select\r\n                            value={this.state.sex} className=\"input__login form__input\"\r\n                            onChange={this.handleSex}\r\n                            disabled={!this.state.editable}>\r\n                            {!this.state.sex && (<option selected>N/A</option>)}\r\n                            <option>Male</option>\r\n                            <option>Female</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"details__userDetails__detail\">\r\n                        <span className=\"details__labels__label\">Phone</span>\r\n                        <input className=\"input__login form__input\"\r\n                            minLength=\"10\"\r\n                            maxLength=\"10\"\r\n                            type=\"text\"\r\n                            value={this.state.phone}\r\n                            onChange={this.handlePhone}\r\n                            disabled={!this.state.editable} />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                {this.props.me ? (\r\n                    (!this.state.editable ? (\r\n                        <button className=\"userDetails__button\" onClick={this.handleEdit}>Edit</button>\r\n                    ) : (\r\n                        <button className=\"userDetails__button\" onClick={this.handleSave}>Save</button>\r\n                    ))\r\n                ) : (<></>)}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { useState } from 'react';\r\nimport Avatar from './AvatarComponent';\r\nimport { connect } from 'react-redux';\r\nimport { Details } from './DetailsComponent';\r\nimport { startEditUser, startLogoutAllUser, startDeleteUser, startAddAvatar } from '../actions/user';\r\nimport generateHeader from './HeaderComponent';\r\nimport fileExtensionExtractor from '../utils/fileExtensionExtractor'; \r\n\r\nconst buttonComponent = (props) => {\r\n    return (\r\n        <div className=\"kuro__header__buttoncomponent\">\r\n            <button onClick={props.onhandleLogoutAll} className=\"app__logo__button\">\r\n                <img className=\"app__buttonlogo\" src=\"/images/logout.png\" />\r\n            </button>\r\n            <button onClick={props.onhandleRemoveAccount}\r\n                className=\"app__logo__button\">\r\n                <img className=\"app__buttonlogo\" src=\"/images/removeaccount.png\" />\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Header = generateHeader(Avatar, buttonComponent);\r\n\r\nconst SettingsComponent = (props) => {\r\n\r\n    const [error, setError] = useState(undefined);\r\n    const [showSaveAvatarButton, setShowSaveAvatarButton] = useState(undefined);\r\n\r\n    const onSave = async (user) => {\r\n        try {\r\n            if(user.phone.length !== 10){\r\n                alert(\"Phone Number must be a 10 digit number. Your number will not be updated until you provide a valid number\");\r\n            }\r\n            await props.startEditUser(props.token, user);\r\n            setError(undefined);\r\n        } catch (e) {\r\n            if(e.response.data.error){\r\n                setError(e.response.data.error);\r\n            }\r\n            if (e.response.data && e.response.data.code === 11000) {\r\n                setError(`${Object.keys(e.response.data.keyPattern)} in use.`);\r\n            }\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const onhandleLogoutAll = async () => {\r\n        try{\r\n            if(confirm(\"Are you sure you want to logout from all active devices?\")){\r\n                await props.startLogoutAllUser(props.user.token).then(() => props.history.push('/'));\r\n            }\r\n            setError(undefined);\r\n        }catch(e){\r\n            setError(\"Unable to logout. Please try again.\");\r\n            console.log(e);            \r\n        }\r\n    }\r\n\r\n    const onhandleRemoveAccount = async () => {\r\n        try{\r\n            if(confirm(\"Are you sure you want to remove your account? You can't undo this.\")){\r\n                await props.startDeleteUser(props.user.token).then(() => props.history.push('/'));\r\n            }\r\n            setError(undefined);\r\n        }catch(e){\r\n            setError(\"Unable to delete account. Please try again.\");\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const grabAvatarComponent = () => {\r\n        if(props.user.hasAvatar){\r\n            return document.querySelector('.profileavatar__image');\r\n        }\r\n        return document.querySelector('.profileavatar__initials');\r\n    }\r\n\r\n    const onAvatarChange = (e) => {\r\n        const avatar = grabAvatarComponent();\r\n        const fileExtension = fileExtensionExtractor(e.target.files[0].name);\r\n        if(!fileExtension.match(/(jpg|jpeg|png)/)){\r\n            setError(\"Only png, jpg and jpeg image files are supported.\");\r\n            return;\r\n        }\r\n        if(!props.user.hasAvatar){\r\n            avatar.style.display=\"none\";\r\n            const hiddenImageTag = document.querySelector('.profileavatar__image');\r\n            hiddenImageTag.src = URL.createObjectURL(e.target.files[0]);\r\n            hiddenImageTag.style.display = \"inline-block\";\r\n        }else{\r\n            avatar.src = URL.createObjectURL(e.target.files[0]);\r\n        }\r\n        setShowSaveAvatarButton(true);\r\n    };\r\n\r\n    const handleAvatarUpload = () => {\r\n        const newAvatarUpload = document.getElementById('settings__avatar__input');\r\n        newAvatarUpload.click();\r\n    }\r\n\r\n    const onSaveAvatar = async () => {\r\n        const newAvatar = document.getElementById('settings__avatar__input');\r\n        if(!newAvatar.files && !newAvatar.files[0]){\r\n            setError(\"Please upload a image file.\");\r\n        }\r\n        try{\r\n            await props.startAddAvatar(props.token, newAvatar.files[0]);\r\n            setError(undefined);\r\n        }catch(e){\r\n            console.log(e);\r\n            setError(\"Unknown error. Please try again later.\");\r\n        }\r\n        setShowSaveAvatarButton(undefined);\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings\">\r\n            <Header\r\n            onSettings={true}\r\n            history={props.history}\r\n            username={props.user.username}\r\n            userId={props.user._id}\r\n            onhandleLogoutAll={onhandleLogoutAll}\r\n            onhandleRemoveAccount={onhandleRemoveAccount}\r\n            />\r\n            <div className=\"settings__avatar__change\">\r\n                <input \r\n                id=\"settings__avatar__input\"\r\n                value={undefined}\r\n                onChange={onAvatarChange}\r\n                type=\"file\" accept=\"image/png, image/jpg, image/jpeg\"/>\r\n                {\r\n                    showSaveAvatarButton ? \r\n                    (\r\n                        <button \r\n                        className=\"settings__avatar__change__button\"\r\n                        onClick={onSaveAvatar}>Save Avatar</button>\r\n                    ) : (\r\n                            <button \r\n                            className=\"settings__avatar__change__button\"\r\n                            onClick={handleAvatarUpload}>Change Avatar</button>\r\n                    )\r\n                }\r\n            </div>\r\n            <span className=\"error error--settings\">{error}</span>\r\n            <Details user={props.user} me={true} onSave={onSave}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    user: state.user,\r\n    token: state.user && state.user.token\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startEditUser: (token, patches) => dispatch(startEditUser(token, patches)),\r\n    startLogoutAllUser: (token) => dispatch(startLogoutAllUser(token)),\r\n    startDeleteUser: (token) => dispatch(startDeleteUser(token)),\r\n    startAddAvatar: (token, avatar) => dispatch(startAddAvatar(token, avatar))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsComponent);","export default (name) => {\r\n    const fileNameChunks = (name.split('.')).reverse();\r\n    return fileNameChunks[0];\r\n}","import React, { useEffect, useState } from 'react';\r\nimport {startFetchContactDetails} from '../actions/user';\r\nimport {Details} from './DetailsComponent';\r\nimport {connect} from 'react-redux';\r\nimport Avatar from './AvatarComponent';\r\n\r\nconst ContactDetails = (props) => {\r\n\r\n    const [contactDetails, setContactDetails] = useState({});\r\n\r\n    const [error, setError] = useState(undefined);\r\n\r\n    const [mount, setMount] = useState(undefined);\r\n\r\n    const fetchcontactDetails = async () => {\r\n        try{\r\n            await props.startFetchContactDetails(props.token, props.contact.id).then((result) => {\r\n                setContactDetails(result.data);\r\n            }); \r\n            setMount(true);\r\n        }catch(e){\r\n            console.log(e);\r\n            if(e.response){\r\n                setError(e.response.data);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchcontactDetails();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"contactdetails\">\r\n            {error ? (\r\n                <span className=\"error\">{error}</span>\r\n            ) : (\r\n                contactDetails.username &&\r\n                    <div className=\"contactdetails__container\">\r\n                        <button onClick={() => props.history.push('/')} \r\n                        className=\" app__logo__button kuro__home__button__back contactdetails__back__button\">\r\n                            <div className=\"app__button__back\">➙</div>\r\n                        </button>\r\n                        <div className=\"contactdetails__details\">\r\n                            <Avatar \r\n                            displaySmall={false} \r\n                            userId={props.contact.id}\r\n                            username={props.contact.username}\r\n                            />\r\n                            <Details me={false} user={contactDetails} />\r\n                        </div>\r\n                    </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n    contact: state.user.contacts.find((contact) => props.match.params.idValue === contact._id),\r\n    token: state.user.token\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    startFetchContactDetails: (token, contactId) => dispatch(startFetchContactDetails(token, contactId))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactDetails);","import React, {Suspense, lazy} from 'react';\r\nimport {Router, Route, Switch} from 'react-router-dom';\r\nimport createHistory from 'history/createBrowserHistory';\r\nimport {connect} from 'react-redux';\r\nimport Home from '../components/Home';\r\nimport Kuro from '../components/Kuro';\r\nimport PrivateRoute from './privateroute';\r\nimport PublicRoute from './publicroute';\r\nimport SearchContact from '../components/SearchContactComponent';\r\nimport Settings from '../components/SettingsComponent';\r\nimport ContactDetails from '../components/ContactDetailsComponent';\r\n\r\n// const Settings = React.lazy(() => import('../components/SettingsComponent'));\r\n// const ContactDetails = React.lazy(() => import('../components/ContactDetailsComponent'));\r\n\r\nexport const history = createHistory();\r\n\r\n\r\nexport const Placeholder = () => (\r\n    <div className=\"loading\">\r\n    </div>\r\n);\r\n\r\nexport const AppRoute = (props) => (\r\n    <Router history={history}>\r\n        <Switch>\r\n            <PublicRoute Authenticated={props.Authenticated} component={Home} path=\"/\" exact={true}/>\r\n            <PrivateRoute component={Kuro} Authenticated={props.Authenticated} path=\"/me\" exact={true} />\r\n            <Suspense fallback={<Placeholder />}>\r\n            <PrivateRoute component={SearchContact} Authenticated={props.Authenticated} path=\"/me/users/find=:findContact\" exact={true} />\r\n                <PrivateRoute component={Settings} Authenticated={props.Authenticated} path=\"/me/settings\" exact={true} />\r\n                <PrivateRoute component={ContactDetails} Authenticated={props.Authenticated} path=\"/me/contactdetails/id=:idValue\" exact={true} />\r\n            </Suspense>\r\n        </Switch>\r\n    </Router>\r\n);\r\n\r\nconst mapStateToProps = (state) => ({\r\n    Authenticated: state.user && !!state.user._id\r\n});\r\n\r\nexport default connect(mapStateToProps)(AppRoute);","const defaultUser = {};\r\nimport {PURGE} from 'redux-persist';\r\n\r\nexport default (state = defaultUser, action) => {\r\n    switch(action.type) {\r\n        case 'ADD_USER':\r\n            return {...action.user, token: action.token};\r\n        case 'REMOVE_USER': \r\n            return {};\r\n        case 'EDIT_USER': \r\n            return {...state, ...action.updates};\r\n        case 'SET_USER': \r\n            return {...action.user, token: action.token};\r\n        case 'EDIT_USER_CONTACTS': \r\n            return {...state, contacts: action.contacts};\r\n        case PURGE : return {};\r\n        default: return state;\r\n    }\r\n}","const defaultFilter = {\r\n    text: '',\r\n    id: ''\r\n}\r\n\r\nexport default (state=defaultFilter, action) => {\r\n    switch (action.type) {\r\n        case 'FILTER__BY__USERNAME': return {...state, text:action.text};\r\n        case 'SET__CURRENT__CONTACT__ID': return {...state, id: action.id};\r\n        default: return state;\r\n    }\r\n}","import {createStore, combineReducers, applyMiddleware, compose} from 'redux';\r\nimport {persistStore, persistReducer} from 'redux-persist';\r\nimport userReducer from '../reducers/user';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport thunk from 'redux-thunk';\r\nimport filterReducer from '../reducers/filter';\r\n\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst userpersistConfig = {\r\n    key: 'user',\r\n    storage\r\n}\r\n\r\nconst userpersistReducer = persistReducer(userpersistConfig, userReducer);\r\n\r\nexport default () => {\r\n    const store = createStore(\r\n        combineReducers({\r\n            user: userpersistReducer,\r\n            filter: filterReducer\r\n        }), composeEnhancer(applyMiddleware(thunk))\r\n    );\r\n    const persistor = persistStore(store);\r\n    return {store, persistor};\r\n};","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport AppRoute from './router/approute';\r\nimport configureStore from './store/store';\r\nimport {Provider} from 'react-redux';\r\nimport {PersistGate} from 'redux-persist/integration/react';\r\n//import {PURGE} from 'redux-persist';\r\nimport 'normalize.css/normalize.css';\r\nimport './styles/styles.scss';\r\n\r\n\r\nexport const {store, persistor} = configureStore();\r\n\r\nconst JSX = () => (\r\n    <Provider store={store}>\r\n        <PersistGate loading={null} persistor={persistor}>\r\n            <AppRoute />\r\n        </PersistGate>\r\n    </Provider>\r\n);\r\n\r\nconst renderApp = () => {\r\n    ReactDom.render(<JSX/>, document.getElementById('root'));\r\n}\r\n\r\nrenderApp();\r\n//store.dispatch({type: PURGE});"],"sourceRoot":""}